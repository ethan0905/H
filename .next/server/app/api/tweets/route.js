"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/tweets/route";
exports.ids = ["app/api/tweets/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftweets%2Froute&page=%2Fapi%2Ftweets%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftweets%2Froute.ts&appDir=%2FUsers%2Fethan%2FDesktop%2FH%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fethan%2FDesktop%2FH&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftweets%2Froute&page=%2Fapi%2Ftweets%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftweets%2Froute.ts&appDir=%2FUsers%2Fethan%2FDesktop%2FH%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fethan%2FDesktop%2FH&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_ethan_Desktop_H_src_app_api_tweets_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/tweets/route.ts */ \"(rsc)/./src/app/api/tweets/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/tweets/route\",\n        pathname: \"/api/tweets\",\n        filename: \"route\",\n        bundlePath: \"app/api/tweets/route\"\n    },\n    resolvedPagePath: \"/Users/ethan/Desktop/H/src/app/api/tweets/route.ts\",\n    nextConfigOutput,\n    userland: _Users_ethan_Desktop_H_src_app_api_tweets_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/tweets/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ0d2VldHMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnR3ZWV0cyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnR3ZWV0cyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmV0aGFuJTJGRGVza3RvcCUyRkglMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGZXRoYW4lMkZEZXNrdG9wJTJGSCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDRTtBQUMvRTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3gtd29ybGQtbWluaS1hcHAvPzVlM2YiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2V0aGFuL0Rlc2t0b3AvSC9zcmMvYXBwL2FwaS90d2VldHMvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3R3ZWV0cy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3R3ZWV0c1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvdHdlZXRzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2V0aGFuL0Rlc2t0b3AvSC9zcmMvYXBwL2FwaS90d2VldHMvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3R3ZWV0cy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftweets%2Froute&page=%2Fapi%2Ftweets%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftweets%2Froute.ts&appDir=%2FUsers%2Fethan%2FDesktop%2FH%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fethan%2FDesktop%2FH&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/tweets/route.ts":
/*!*************************************!*\
  !*** ./src/app/api/tweets/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n\n\n// Helper function to create initial seed data\nasync function seedInitialData() {\n    const userCount = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.user.count();\n    if (userCount > 0) return; // Already seeded\n    // Create seed users\n    const user1 = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.user.create({\n        data: {\n            id: \"user1\",\n            worldcoinId: \"world_user_1\",\n            username: \"alice_world\",\n            displayName: \"Alice\",\n            avatar: \"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=150&h=150&fit=crop&crop=face\",\n            profilePictureUrl: \"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=150&h=150&fit=crop&crop=face\",\n            isVerified: true,\n            bio: \"Welcome to the future of social media! \\uD83C\\uDF0D\"\n        }\n    });\n    const user2 = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.user.create({\n        data: {\n            id: \"user2\",\n            worldcoinId: \"world_user_2\",\n            username: \"bob_crypto\",\n            displayName: \"Bob\",\n            avatar: \"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face\",\n            profilePictureUrl: \"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face\",\n            isVerified: true,\n            bio: \"Crypto enthusiast and privacy advocate\"\n        }\n    });\n    const user3 = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.user.create({\n        data: {\n            id: \"user3\",\n            worldcoinId: \"world_user_3\",\n            username: \"dev_charlie\",\n            displayName: \"Charlie Dev\",\n            avatar: \"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face\",\n            profilePictureUrl: \"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face\",\n            isVerified: true,\n            bio: \"Building the next generation of social apps\"\n        }\n    });\n    // Create seed tweets\n    await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.tweet.create({\n        data: {\n            content: \"Welcome to World App! \\uD83C\\uDF0D This is the future of decentralized social media.\",\n            authorId: user1.id,\n            createdAt: new Date(Date.now() - 3600000)\n        }\n    });\n    await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.tweet.create({\n        data: {\n            content: \"Just verified my identity with World ID! The authentication process is seamless and secure. #WorldID #Privacy\",\n            authorId: user2.id,\n            createdAt: new Date(Date.now() - 7200000)\n        }\n    });\n    const tweet3 = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.tweet.create({\n        data: {\n            content: \"Building the next generation of social apps with minikit-js. The possibilities are endless! \\uD83D\\uDE80\",\n            authorId: user3.id,\n            createdAt: new Date(Date.now() - 10800000)\n        }\n    });\n    // Add some media to the third tweet\n    await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.media.create({\n        data: {\n            tweetId: tweet3.id,\n            type: \"image\",\n            url: \"https://images.unsplash.com/photo-1551434678-e076c223a692?w=800&h=600&fit=crop\",\n            thumbnailUrl: \"https://images.unsplash.com/photo-1551434678-e076c223a692?w=400&h=300&fit=crop\"\n        }\n    });\n}\nasync function GET(request) {\n    try {\n        // Ensure seed data exists\n        await seedInitialData();\n        const { searchParams } = new URL(request.url);\n        const limit = parseInt(searchParams.get(\"limit\") || \"20\");\n        const offset = parseInt(searchParams.get(\"offset\") || \"0\");\n        const userId = searchParams.get(\"userId\"); // Optional: to get user-specific interaction status\n        // Fetch tweets with user data and counts\n        const tweets = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.tweet.findMany({\n            include: {\n                author: true,\n                media: true,\n                _count: {\n                    select: {\n                        likes: true,\n                        retweets: true\n                    }\n                }\n            },\n            orderBy: {\n                createdAt: \"desc\"\n            },\n            skip: offset,\n            take: limit\n        });\n        const totalCount = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.tweet.count();\n        // Get user interactions if userId provided\n        let userInteractions = {};\n        if (userId) {\n            const tweetIds = tweets.map((tweet)=>tweet.id);\n            const [likes, retweets] = await Promise.all([\n                _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.like.findMany({\n                    where: {\n                        userId,\n                        tweetId: {\n                            in: tweetIds\n                        }\n                    },\n                    select: {\n                        tweetId: true\n                    }\n                }),\n                _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.retweet.findMany({\n                    where: {\n                        userId,\n                        tweetId: {\n                            in: tweetIds\n                        }\n                    },\n                    select: {\n                        tweetId: true\n                    }\n                })\n            ]);\n            const likedTweetIds = new Set(likes.map((like)=>like.tweetId));\n            const retweetedTweetIds = new Set(retweets.map((retweet)=>retweet.tweetId));\n            userInteractions = tweetIds.reduce((acc, tweetId)=>{\n                acc[tweetId] = {\n                    isLiked: likedTweetIds.has(tweetId),\n                    isRetweeted: retweetedTweetIds.has(tweetId)\n                };\n                return acc;\n            }, {});\n        }\n        // Get comment counts for all tweets\n        const tweetIds = tweets.map((tweet)=>tweet.id);\n        const commentCounts = await Promise.all(tweetIds.map(async (tweetId)=>{\n            const count = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.comment.count({\n                where: {\n                    tweetId\n                }\n            });\n            return {\n                tweetId,\n                count\n            };\n        }));\n        const commentCountMap = commentCounts.reduce((acc, { tweetId, count })=>{\n            acc[tweetId] = count;\n            return acc;\n        }, {});\n        // Transform to match frontend format\n        const transformedTweets = tweets.map((tweet)=>({\n                id: tweet.id,\n                content: tweet.content,\n                author: {\n                    id: tweet.author.id,\n                    worldcoinId: tweet.author.worldcoinId || undefined,\n                    walletAddress: tweet.author.walletAddress || undefined,\n                    username: tweet.author.username,\n                    displayName: tweet.author.displayName,\n                    bio: tweet.author.bio || undefined,\n                    avatar: tweet.author.avatar || undefined,\n                    profilePictureUrl: tweet.author.profilePictureUrl || undefined,\n                    isVerified: tweet.author.isVerified,\n                    createdAt: tweet.author.createdAt\n                },\n                createdAt: tweet.createdAt.toISOString(),\n                likes: tweet._count.likes,\n                retweets: tweet._count.retweets,\n                replies: commentCountMap[tweet.id] || 0,\n                media: tweet.media.map((m)=>({\n                        id: m.id,\n                        type: m.type,\n                        url: m.url,\n                        thumbnailUrl: m.thumbnailUrl || undefined,\n                        alt: m.alt || undefined\n                    })),\n                isLiked: userInteractions[tweet.id]?.isLiked || false,\n                isRetweeted: userInteractions[tweet.id]?.isRetweeted || false\n            }));\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            tweets: transformedTweets,\n            hasMore: offset + limit < totalCount,\n            total: totalCount\n        });\n    } catch (error) {\n        console.error(\"Error fetching tweets:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to fetch tweets\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const { content, media, userId } = body;\n        // Validate required fields\n        if (!content || !userId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Content and userId are required\"\n            }, {\n                status: 400\n            });\n        }\n        if (content.length > 280) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Tweet content cannot exceed 280 characters\"\n            }, {\n                status: 400\n            });\n        }\n        // Find or create user\n        let user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.user.findFirst({\n            where: {\n                OR: [\n                    {\n                        id: userId\n                    },\n                    {\n                        nullifierHash: userId\n                    },\n                    {\n                        walletAddress: userId\n                    }\n                ]\n            }\n        });\n        if (!user) {\n            // Create new user\n            const isWorldIdUser = userId.startsWith(\"0x\") && userId.length > 20;\n            const isWalletUser = userId.startsWith(\"0x\") && userId.length <= 20;\n            user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.user.create({\n                data: {\n                    id: userId,\n                    nullifierHash: isWorldIdUser ? userId : undefined,\n                    walletAddress: isWalletUser ? userId : undefined,\n                    worldcoinId: isWorldIdUser ? `world_${userId}` : undefined,\n                    username: isWorldIdUser ? `human_${userId.slice(-8)}` : isWalletUser ? `user_${userId.slice(-8)}` : userId.startsWith(\"user\") ? userId : `user_${userId}`,\n                    displayName: isWorldIdUser ? \"Verified Human\" : isWalletUser ? \"World User\" : userId.startsWith(\"user\") ? userId.charAt(0).toUpperCase() + userId.slice(1) : \"User\",\n                    bio: isWorldIdUser ? \"Verified human on World ID\" : isWalletUser ? \"World App user\" : \"User profile\",\n                    avatar: `https://api.dicebear.com/7.x/personas/svg?seed=${userId}`,\n                    profilePictureUrl: `https://api.dicebear.com/7.x/personas/svg?seed=${userId}`,\n                    isVerified: isWorldIdUser || [\n                        \"user1\",\n                        \"user2\",\n                        \"user3\"\n                    ].includes(userId),\n                    verificationLevel: isWorldIdUser ? \"orb\" : undefined\n                }\n            });\n        }\n        // Create tweet\n        const tweet = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.tweet.create({\n            data: {\n                content,\n                authorId: user.id\n            },\n            include: {\n                author: true,\n                media: true,\n                _count: {\n                    select: {\n                        likes: true,\n                        retweets: true\n                    }\n                }\n            }\n        });\n        // Add media if provided\n        if (media && media.length > 0) {\n            await Promise.all(media.map((item)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.media.create({\n                    data: {\n                        tweetId: tweet.id,\n                        type: item.type,\n                        url: item.url,\n                        thumbnailUrl: item.thumbnailUrl,\n                        alt: item.alt\n                    }\n                })));\n        }\n        // Transform to match frontend format\n        const transformedTweet = {\n            id: tweet.id,\n            content: tweet.content,\n            author: {\n                id: tweet.author.id,\n                worldcoinId: tweet.author.worldcoinId || undefined,\n                walletAddress: tweet.author.walletAddress || undefined,\n                username: tweet.author.username,\n                displayName: tweet.author.displayName,\n                bio: tweet.author.bio || undefined,\n                avatar: tweet.author.avatar || undefined,\n                profilePictureUrl: tweet.author.profilePictureUrl || undefined,\n                isVerified: tweet.author.isVerified,\n                createdAt: tweet.author.createdAt\n            },\n            createdAt: tweet.createdAt.toISOString(),\n            likes: tweet._count.likes,\n            retweets: tweet._count.retweets,\n            replies: 0,\n            media: tweet.media.map((m)=>({\n                    id: m.id,\n                    type: m.type,\n                    url: m.url,\n                    thumbnailUrl: m.thumbnailUrl || undefined,\n                    alt: m.alt || undefined\n                })),\n            isLiked: false,\n            isRetweeted: false\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(transformedTweet, {\n            status: 201\n        });\n    } catch (error) {\n        console.error(\"Error creating tweet:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to create tweet\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUw7Z0JBQ2hCO1lBQ0FQLFNBQVM7WUFDVEUsYUFBYTtRQUNmO1FBRUEsT0FBT3BFLHFEQUFZQSxDQUFDK0UsSUFBSSxDQUFDcUIsa0JBQWtCO1lBQUVoQixRQUFRO1FBQUk7SUFDM0QsRUFBRSxPQUFPRixPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyx5QkFBeUJBO1FBQ3ZDLE9BQU9sRixxREFBWUEsQ0FBQytFLElBQUksQ0FDdEI7WUFBRUcsT0FBTztRQUF5QixHQUNsQztZQUFFRSxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3gtd29ybGQtbWluaS1hcHAvLi9zcmMvYXBwL2FwaS90d2VldHMvcm91dGUudHM/ZWY2ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgVHdlZXQgfSBmcm9tICdAL3R5cGVzJztcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0AvbGliL3ByaXNtYSc7XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBjcmVhdGUgaW5pdGlhbCBzZWVkIGRhdGFcbmFzeW5jIGZ1bmN0aW9uIHNlZWRJbml0aWFsRGF0YSgpIHtcbiAgY29uc3QgdXNlckNvdW50ID0gYXdhaXQgcHJpc21hLnVzZXIuY291bnQoKTtcbiAgaWYgKHVzZXJDb3VudCA+IDApIHJldHVybjsgLy8gQWxyZWFkeSBzZWVkZWRcblxuICAvLyBDcmVhdGUgc2VlZCB1c2Vyc1xuICBjb25zdCB1c2VyMSA9IGF3YWl0IHByaXNtYS51c2VyLmNyZWF0ZSh7XG4gICAgZGF0YToge1xuICAgICAgaWQ6ICd1c2VyMScsXG4gICAgICB3b3JsZGNvaW5JZDogJ3dvcmxkX3VzZXJfMScsXG4gICAgICB1c2VybmFtZTogJ2FsaWNlX3dvcmxkJyxcbiAgICAgIGRpc3BsYXlOYW1lOiAnQWxpY2UnLFxuICAgICAgYXZhdGFyOiAnaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE0OTQ3OTAxMDg3NTUtMjYxNmI2MTJiNzg2P3c9MTUwJmg9MTUwJmZpdD1jcm9wJmNyb3A9ZmFjZScsXG4gICAgICBwcm9maWxlUGljdHVyZVVybDogJ2h0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNDk0NzkwMTA4NzU1LTI2MTZiNjEyYjc4Nj93PTE1MCZoPTE1MCZmaXQ9Y3JvcCZjcm9wPWZhY2UnLFxuICAgICAgaXNWZXJpZmllZDogdHJ1ZSxcbiAgICAgIGJpbzogJ1dlbGNvbWUgdG8gdGhlIGZ1dHVyZSBvZiBzb2NpYWwgbWVkaWEhIPCfjI0nLFxuICAgIH0sXG4gIH0pO1xuXG4gIGNvbnN0IHVzZXIyID0gYXdhaXQgcHJpc21hLnVzZXIuY3JlYXRlKHtcbiAgICBkYXRhOiB7XG4gICAgICBpZDogJ3VzZXIyJyxcbiAgICAgIHdvcmxkY29pbklkOiAnd29ybGRfdXNlcl8yJyxcbiAgICAgIHVzZXJuYW1lOiAnYm9iX2NyeXB0bycsXG4gICAgICBkaXNwbGF5TmFtZTogJ0JvYicsXG4gICAgICBhdmF0YXI6ICdodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTUwNzAwMzIxMTE2OS0wYTFkZDcyMjhmMmQ/dz0xNTAmaD0xNTAmZml0PWNyb3AmY3JvcD1mYWNlJyxcbiAgICAgIHByb2ZpbGVQaWN0dXJlVXJsOiAnaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MDcwMDMyMTExNjktMGExZGQ3MjI4ZjJkP3c9MTUwJmg9MTUwJmZpdD1jcm9wJmNyb3A9ZmFjZScsXG4gICAgICBpc1ZlcmlmaWVkOiB0cnVlLFxuICAgICAgYmlvOiAnQ3J5cHRvIGVudGh1c2lhc3QgYW5kIHByaXZhY3kgYWR2b2NhdGUnLFxuICAgIH0sXG4gIH0pO1xuXG4gIGNvbnN0IHVzZXIzID0gYXdhaXQgcHJpc21hLnVzZXIuY3JlYXRlKHtcbiAgICBkYXRhOiB7XG4gICAgICBpZDogJ3VzZXIzJyxcbiAgICAgIHdvcmxkY29pbklkOiAnd29ybGRfdXNlcl8zJyxcbiAgICAgIHVzZXJuYW1lOiAnZGV2X2NoYXJsaWUnLFxuICAgICAgZGlzcGxheU5hbWU6ICdDaGFybGllIERldicsXG4gICAgICBhdmF0YXI6ICdodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTQ3MjA5OTY0NTc4NS01NjU4YWJmNGZmNGU/dz0xNTAmaD0xNTAmZml0PWNyb3AmY3JvcD1mYWNlJyxcbiAgICAgIHByb2ZpbGVQaWN0dXJlVXJsOiAnaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE0NzIwOTk2NDU3ODUtNTY1OGFiZjRmZjRlP3c9MTUwJmg9MTUwJmZpdD1jcm9wJmNyb3A9ZmFjZScsXG4gICAgICBpc1ZlcmlmaWVkOiB0cnVlLFxuICAgICAgYmlvOiAnQnVpbGRpbmcgdGhlIG5leHQgZ2VuZXJhdGlvbiBvZiBzb2NpYWwgYXBwcycsXG4gICAgfSxcbiAgfSk7XG5cbiAgLy8gQ3JlYXRlIHNlZWQgdHdlZXRzXG4gIGF3YWl0IHByaXNtYS50d2VldC5jcmVhdGUoe1xuICAgIGRhdGE6IHtcbiAgICAgIGNvbnRlbnQ6ICdXZWxjb21lIHRvIFdvcmxkIEFwcCEg8J+MjSBUaGlzIGlzIHRoZSBmdXR1cmUgb2YgZGVjZW50cmFsaXplZCBzb2NpYWwgbWVkaWEuJyxcbiAgICAgIGF1dGhvcklkOiB1c2VyMS5pZCxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoRGF0ZS5ub3coKSAtIDM2MDAwMDApLCAvLyAxIGhvdXIgYWdvXG4gICAgfSxcbiAgfSk7XG5cbiAgYXdhaXQgcHJpc21hLnR3ZWV0LmNyZWF0ZSh7XG4gICAgZGF0YToge1xuICAgICAgY29udGVudDogJ0p1c3QgdmVyaWZpZWQgbXkgaWRlbnRpdHkgd2l0aCBXb3JsZCBJRCEgVGhlIGF1dGhlbnRpY2F0aW9uIHByb2Nlc3MgaXMgc2VhbWxlc3MgYW5kIHNlY3VyZS4gI1dvcmxkSUQgI1ByaXZhY3knLFxuICAgICAgYXV0aG9ySWQ6IHVzZXIyLmlkLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZShEYXRlLm5vdygpIC0gNzIwMDAwMCksIC8vIDIgaG91cnMgYWdvXG4gICAgfSxcbiAgfSk7XG5cbiAgY29uc3QgdHdlZXQzID0gYXdhaXQgcHJpc21hLnR3ZWV0LmNyZWF0ZSh7XG4gICAgZGF0YToge1xuICAgICAgY29udGVudDogJ0J1aWxkaW5nIHRoZSBuZXh0IGdlbmVyYXRpb24gb2Ygc29jaWFsIGFwcHMgd2l0aCBtaW5pa2l0LWpzLiBUaGUgcG9zc2liaWxpdGllcyBhcmUgZW5kbGVzcyEg8J+agCcsXG4gICAgICBhdXRob3JJZDogdXNlcjMuaWQsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKERhdGUubm93KCkgLSAxMDgwMDAwMCksIC8vIDMgaG91cnMgYWdvXG4gICAgfSxcbiAgfSk7XG5cbiAgLy8gQWRkIHNvbWUgbWVkaWEgdG8gdGhlIHRoaXJkIHR3ZWV0XG4gIGF3YWl0IHByaXNtYS5tZWRpYS5jcmVhdGUoe1xuICAgIGRhdGE6IHtcbiAgICAgIHR3ZWV0SWQ6IHR3ZWV0My5pZCxcbiAgICAgIHR5cGU6ICdpbWFnZScsXG4gICAgICB1cmw6ICdodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTU1MTQzNDY3OC1lMDc2YzIyM2E2OTI/dz04MDAmaD02MDAmZml0PWNyb3AnLFxuICAgICAgdGh1bWJuYWlsVXJsOiAnaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1NTE0MzQ2NzgtZTA3NmMyMjNhNjkyP3c9NDAwJmg9MzAwJmZpdD1jcm9wJyxcbiAgICB9LFxuICB9KTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIC8vIEVuc3VyZSBzZWVkIGRhdGEgZXhpc3RzXG4gICAgYXdhaXQgc2VlZEluaXRpYWxEYXRhKCk7XG5cbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XG4gICAgY29uc3QgbGltaXQgPSBwYXJzZUludChzZWFyY2hQYXJhbXMuZ2V0KCdsaW1pdCcpIHx8ICcyMCcpO1xuICAgIGNvbnN0IG9mZnNldCA9IHBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoJ29mZnNldCcpIHx8ICcwJyk7XG4gICAgY29uc3QgdXNlcklkID0gc2VhcmNoUGFyYW1zLmdldCgndXNlcklkJyk7IC8vIE9wdGlvbmFsOiB0byBnZXQgdXNlci1zcGVjaWZpYyBpbnRlcmFjdGlvbiBzdGF0dXNcblxuICAgIC8vIEZldGNoIHR3ZWV0cyB3aXRoIHVzZXIgZGF0YSBhbmQgY291bnRzXG4gICAgY29uc3QgdHdlZXRzID0gYXdhaXQgcHJpc21hLnR3ZWV0LmZpbmRNYW55KHtcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgYXV0aG9yOiB0cnVlLFxuICAgICAgICBtZWRpYTogdHJ1ZSxcbiAgICAgICAgX2NvdW50OiB7XG4gICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICBsaWtlczogdHJ1ZSxcbiAgICAgICAgICAgIHJldHdlZXRzOiB0cnVlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgb3JkZXJCeToge1xuICAgICAgICBjcmVhdGVkQXQ6ICdkZXNjJyxcbiAgICAgIH0sXG4gICAgICBza2lwOiBvZmZzZXQsXG4gICAgICB0YWtlOiBsaW1pdCxcbiAgICB9KTtcblxuICAgIGNvbnN0IHRvdGFsQ291bnQgPSBhd2FpdCBwcmlzbWEudHdlZXQuY291bnQoKTtcblxuICAgIC8vIEdldCB1c2VyIGludGVyYWN0aW9ucyBpZiB1c2VySWQgcHJvdmlkZWRcbiAgICBsZXQgdXNlckludGVyYWN0aW9uczogUmVjb3JkPHN0cmluZywgeyBpc0xpa2VkOiBib29sZWFuOyBpc1JldHdlZXRlZDogYm9vbGVhbiB9PiA9IHt9O1xuICAgIGlmICh1c2VySWQpIHtcbiAgICAgIGNvbnN0IHR3ZWV0SWRzID0gdHdlZXRzLm1hcCgodHdlZXQ6IGFueSkgPT4gdHdlZXQuaWQpO1xuICAgICAgY29uc3QgW2xpa2VzLCByZXR3ZWV0c10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIHByaXNtYS5saWtlLmZpbmRNYW55KHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgdXNlcklkLFxuICAgICAgICAgICAgdHdlZXRJZDogeyBpbjogdHdlZXRJZHMgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNlbGVjdDogeyB0d2VldElkOiB0cnVlIH0sXG4gICAgICAgIH0pLFxuICAgICAgICBwcmlzbWEucmV0d2VldC5maW5kTWFueSh7XG4gICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICAgIHR3ZWV0SWQ6IHsgaW46IHR3ZWV0SWRzIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZWxlY3Q6IHsgdHdlZXRJZDogdHJ1ZSB9LFxuICAgICAgICB9KSxcbiAgICAgIF0pO1xuXG4gICAgICBjb25zdCBsaWtlZFR3ZWV0SWRzID0gbmV3IFNldChsaWtlcy5tYXAoKGxpa2U6IGFueSkgPT4gbGlrZS50d2VldElkKSk7XG4gICAgICBjb25zdCByZXR3ZWV0ZWRUd2VldElkcyA9IG5ldyBTZXQocmV0d2VldHMubWFwKChyZXR3ZWV0OiBhbnkpID0+IHJldHdlZXQudHdlZXRJZCkpO1xuXG4gICAgICB1c2VySW50ZXJhY3Rpb25zID0gdHdlZXRJZHMucmVkdWNlKChhY2M6IGFueSwgdHdlZXRJZDogc3RyaW5nKSA9PiB7XG4gICAgICAgIGFjY1t0d2VldElkXSA9IHtcbiAgICAgICAgICBpc0xpa2VkOiBsaWtlZFR3ZWV0SWRzLmhhcyh0d2VldElkKSxcbiAgICAgICAgICBpc1JldHdlZXRlZDogcmV0d2VldGVkVHdlZXRJZHMuaGFzKHR3ZWV0SWQpLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgfSwge30gYXMgUmVjb3JkPHN0cmluZywgeyBpc0xpa2VkOiBib29sZWFuOyBpc1JldHdlZXRlZDogYm9vbGVhbiB9Pik7XG4gICAgfVxuXG4gICAgLy8gR2V0IGNvbW1lbnQgY291bnRzIGZvciBhbGwgdHdlZXRzXG4gICAgY29uc3QgdHdlZXRJZHMgPSB0d2VldHMubWFwKCh0d2VldDogYW55KSA9PiB0d2VldC5pZCk7XG4gICAgY29uc3QgY29tbWVudENvdW50cyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgdHdlZXRJZHMubWFwKGFzeW5jICh0d2VldElkOiBzdHJpbmcpID0+IHtcbiAgICAgICAgY29uc3QgY291bnQgPSBhd2FpdCBwcmlzbWEuY29tbWVudC5jb3VudCh7XG4gICAgICAgICAgd2hlcmU6IHsgdHdlZXRJZCB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4geyB0d2VldElkLCBjb3VudCB9O1xuICAgICAgfSlcbiAgICApO1xuICAgIGNvbnN0IGNvbW1lbnRDb3VudE1hcCA9IGNvbW1lbnRDb3VudHMucmVkdWNlKChhY2M6IGFueSwgeyB0d2VldElkLCBjb3VudCB9KSA9PiB7XG4gICAgICBhY2NbdHdlZXRJZF0gPSBjb3VudDtcbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge30pO1xuXG4gICAgLy8gVHJhbnNmb3JtIHRvIG1hdGNoIGZyb250ZW5kIGZvcm1hdFxuICAgIGNvbnN0IHRyYW5zZm9ybWVkVHdlZXRzOiBUd2VldFtdID0gdHdlZXRzLm1hcCgodHdlZXQ6IGFueSkgPT4gKHtcbiAgICAgIGlkOiB0d2VldC5pZCxcbiAgICAgIGNvbnRlbnQ6IHR3ZWV0LmNvbnRlbnQsXG4gICAgICBhdXRob3I6IHtcbiAgICAgICAgaWQ6IHR3ZWV0LmF1dGhvci5pZCxcbiAgICAgICAgd29ybGRjb2luSWQ6IHR3ZWV0LmF1dGhvci53b3JsZGNvaW5JZCB8fCB1bmRlZmluZWQsXG4gICAgICAgIHdhbGxldEFkZHJlc3M6IHR3ZWV0LmF1dGhvci53YWxsZXRBZGRyZXNzIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgdXNlcm5hbWU6IHR3ZWV0LmF1dGhvci51c2VybmFtZSxcbiAgICAgICAgZGlzcGxheU5hbWU6IHR3ZWV0LmF1dGhvci5kaXNwbGF5TmFtZSxcbiAgICAgICAgYmlvOiB0d2VldC5hdXRob3IuYmlvIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgYXZhdGFyOiB0d2VldC5hdXRob3IuYXZhdGFyIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgcHJvZmlsZVBpY3R1cmVVcmw6IHR3ZWV0LmF1dGhvci5wcm9maWxlUGljdHVyZVVybCB8fCB1bmRlZmluZWQsXG4gICAgICAgIGlzVmVyaWZpZWQ6IHR3ZWV0LmF1dGhvci5pc1ZlcmlmaWVkLFxuICAgICAgICBjcmVhdGVkQXQ6IHR3ZWV0LmF1dGhvci5jcmVhdGVkQXQsXG4gICAgICB9LFxuICAgICAgY3JlYXRlZEF0OiB0d2VldC5jcmVhdGVkQXQudG9JU09TdHJpbmcoKSxcbiAgICAgIGxpa2VzOiB0d2VldC5fY291bnQubGlrZXMsXG4gICAgICByZXR3ZWV0czogdHdlZXQuX2NvdW50LnJldHdlZXRzLFxuICAgICAgcmVwbGllczogY29tbWVudENvdW50TWFwW3R3ZWV0LmlkXSB8fCAwLFxuICAgICAgbWVkaWE6IHR3ZWV0Lm1lZGlhLm1hcCgobTogYW55KSA9PiAoe1xuICAgICAgICBpZDogbS5pZCxcbiAgICAgICAgdHlwZTogbS50eXBlIGFzICdpbWFnZScgfCAndmlkZW8nLFxuICAgICAgICB1cmw6IG0udXJsLFxuICAgICAgICB0aHVtYm5haWxVcmw6IG0udGh1bWJuYWlsVXJsIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgYWx0OiBtLmFsdCB8fCB1bmRlZmluZWQsXG4gICAgICB9KSksXG4gICAgICBpc0xpa2VkOiB1c2VySW50ZXJhY3Rpb25zW3R3ZWV0LmlkXT8uaXNMaWtlZCB8fCBmYWxzZSxcbiAgICAgIGlzUmV0d2VldGVkOiB1c2VySW50ZXJhY3Rpb25zW3R3ZWV0LmlkXT8uaXNSZXR3ZWV0ZWQgfHwgZmFsc2UsXG4gICAgfSkpO1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHR3ZWV0czogdHJhbnNmb3JtZWRUd2VldHMsXG4gICAgICBoYXNNb3JlOiBvZmZzZXQgKyBsaW1pdCA8IHRvdGFsQ291bnQsXG4gICAgICB0b3RhbDogdG90YWxDb3VudCxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB0d2VldHM6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gZmV0Y2ggdHdlZXRzJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICBjb25zdCB7IGNvbnRlbnQsIG1lZGlhLCB1c2VySWQgfSA9IGJvZHk7XG5cbiAgICAvLyBWYWxpZGF0ZSByZXF1aXJlZCBmaWVsZHNcbiAgICBpZiAoIWNvbnRlbnQgfHwgIXVzZXJJZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnQ29udGVudCBhbmQgdXNlcklkIGFyZSByZXF1aXJlZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChjb250ZW50Lmxlbmd0aCA+IDI4MCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnVHdlZXQgY29udGVudCBjYW5ub3QgZXhjZWVkIDI4MCBjaGFyYWN0ZXJzJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gRmluZCBvciBjcmVhdGUgdXNlclxuICAgIGxldCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZEZpcnN0KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIE9SOiBbXG4gICAgICAgICAgeyBpZDogdXNlcklkIH0sXG4gICAgICAgICAgeyBudWxsaWZpZXJIYXNoOiB1c2VySWQgfSxcbiAgICAgICAgICB7IHdhbGxldEFkZHJlc3M6IHVzZXJJZCB9LFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGlmICghdXNlcikge1xuICAgICAgLy8gQ3JlYXRlIG5ldyB1c2VyXG4gICAgICBjb25zdCBpc1dvcmxkSWRVc2VyID0gdXNlcklkLnN0YXJ0c1dpdGgoJzB4JykgJiYgdXNlcklkLmxlbmd0aCA+IDIwO1xuICAgICAgY29uc3QgaXNXYWxsZXRVc2VyID0gdXNlcklkLnN0YXJ0c1dpdGgoJzB4JykgJiYgdXNlcklkLmxlbmd0aCA8PSAyMDtcbiAgICAgIFxuICAgICAgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBpZDogdXNlcklkLFxuICAgICAgICAgIG51bGxpZmllckhhc2g6IGlzV29ybGRJZFVzZXIgPyB1c2VySWQgOiB1bmRlZmluZWQsXG4gICAgICAgICAgd2FsbGV0QWRkcmVzczogaXNXYWxsZXRVc2VyID8gdXNlcklkIDogdW5kZWZpbmVkLFxuICAgICAgICAgIHdvcmxkY29pbklkOiBpc1dvcmxkSWRVc2VyID8gYHdvcmxkXyR7dXNlcklkfWAgOiB1bmRlZmluZWQsXG4gICAgICAgICAgdXNlcm5hbWU6IGlzV29ybGRJZFVzZXIgXG4gICAgICAgICAgICA/IGBodW1hbl8ke3VzZXJJZC5zbGljZSgtOCl9YCBcbiAgICAgICAgICAgIDogaXNXYWxsZXRVc2VyIFxuICAgICAgICAgICAgICA/IGB1c2VyXyR7dXNlcklkLnNsaWNlKC04KX1gXG4gICAgICAgICAgICAgIDogdXNlcklkLnN0YXJ0c1dpdGgoJ3VzZXInKSA/IHVzZXJJZCA6IGB1c2VyXyR7dXNlcklkfWAsXG4gICAgICAgICAgZGlzcGxheU5hbWU6IGlzV29ybGRJZFVzZXIgXG4gICAgICAgICAgICA/ICdWZXJpZmllZCBIdW1hbicgXG4gICAgICAgICAgICA6IGlzV2FsbGV0VXNlciBcbiAgICAgICAgICAgICAgPyAnV29ybGQgVXNlcidcbiAgICAgICAgICAgICAgOiB1c2VySWQuc3RhcnRzV2l0aCgndXNlcicpID8gdXNlcklkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdXNlcklkLnNsaWNlKDEpIDogJ1VzZXInLFxuICAgICAgICAgIGJpbzogaXNXb3JsZElkVXNlciBcbiAgICAgICAgICAgID8gJ1ZlcmlmaWVkIGh1bWFuIG9uIFdvcmxkIElEJyBcbiAgICAgICAgICAgIDogaXNXYWxsZXRVc2VyIFxuICAgICAgICAgICAgICA/ICdXb3JsZCBBcHAgdXNlcidcbiAgICAgICAgICAgICAgOiAnVXNlciBwcm9maWxlJyxcbiAgICAgICAgICBhdmF0YXI6IGBodHRwczovL2FwaS5kaWNlYmVhci5jb20vNy54L3BlcnNvbmFzL3N2Zz9zZWVkPSR7dXNlcklkfWAsXG4gICAgICAgICAgcHJvZmlsZVBpY3R1cmVVcmw6IGBodHRwczovL2FwaS5kaWNlYmVhci5jb20vNy54L3BlcnNvbmFzL3N2Zz9zZWVkPSR7dXNlcklkfWAsXG4gICAgICAgICAgaXNWZXJpZmllZDogaXNXb3JsZElkVXNlciB8fCBbJ3VzZXIxJywgJ3VzZXIyJywgJ3VzZXIzJ10uaW5jbHVkZXModXNlcklkKSxcbiAgICAgICAgICB2ZXJpZmljYXRpb25MZXZlbDogaXNXb3JsZElkVXNlciA/ICdvcmInIDogdW5kZWZpbmVkLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIHR3ZWV0XG4gICAgY29uc3QgdHdlZXQgPSBhd2FpdCBwcmlzbWEudHdlZXQuY3JlYXRlKHtcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgY29udGVudCxcbiAgICAgICAgYXV0aG9ySWQ6IHVzZXIuaWQsXG4gICAgICB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBhdXRob3I6IHRydWUsXG4gICAgICAgIG1lZGlhOiB0cnVlLFxuICAgICAgICBfY291bnQ6IHtcbiAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgIGxpa2VzOiB0cnVlLFxuICAgICAgICAgICAgcmV0d2VldHM6IHRydWUsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBBZGQgbWVkaWEgaWYgcHJvdmlkZWRcbiAgICBpZiAobWVkaWEgJiYgbWVkaWEubGVuZ3RoID4gMCkge1xuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgIG1lZGlhLm1hcCgoaXRlbTogYW55KSA9PlxuICAgICAgICAgIHByaXNtYS5tZWRpYS5jcmVhdGUoe1xuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICB0d2VldElkOiB0d2VldC5pZCxcbiAgICAgICAgICAgICAgdHlwZTogaXRlbS50eXBlLFxuICAgICAgICAgICAgICB1cmw6IGl0ZW0udXJsLFxuICAgICAgICAgICAgICB0aHVtYm5haWxVcmw6IGl0ZW0udGh1bWJuYWlsVXJsLFxuICAgICAgICAgICAgICBhbHQ6IGl0ZW0uYWx0LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIFRyYW5zZm9ybSB0byBtYXRjaCBmcm9udGVuZCBmb3JtYXRcbiAgICBjb25zdCB0cmFuc2Zvcm1lZFR3ZWV0OiBUd2VldCA9IHtcbiAgICAgIGlkOiB0d2VldC5pZCxcbiAgICAgIGNvbnRlbnQ6IHR3ZWV0LmNvbnRlbnQsXG4gICAgICBhdXRob3I6IHtcbiAgICAgICAgaWQ6IHR3ZWV0LmF1dGhvci5pZCxcbiAgICAgICAgd29ybGRjb2luSWQ6IHR3ZWV0LmF1dGhvci53b3JsZGNvaW5JZCB8fCB1bmRlZmluZWQsXG4gICAgICAgIHdhbGxldEFkZHJlc3M6IHR3ZWV0LmF1dGhvci53YWxsZXRBZGRyZXNzIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgdXNlcm5hbWU6IHR3ZWV0LmF1dGhvci51c2VybmFtZSxcbiAgICAgICAgZGlzcGxheU5hbWU6IHR3ZWV0LmF1dGhvci5kaXNwbGF5TmFtZSxcbiAgICAgICAgYmlvOiB0d2VldC5hdXRob3IuYmlvIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgYXZhdGFyOiB0d2VldC5hdXRob3IuYXZhdGFyIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgcHJvZmlsZVBpY3R1cmVVcmw6IHR3ZWV0LmF1dGhvci5wcm9maWxlUGljdHVyZVVybCB8fCB1bmRlZmluZWQsXG4gICAgICAgIGlzVmVyaWZpZWQ6IHR3ZWV0LmF1dGhvci5pc1ZlcmlmaWVkLFxuICAgICAgICBjcmVhdGVkQXQ6IHR3ZWV0LmF1dGhvci5jcmVhdGVkQXQsXG4gICAgICB9LFxuICAgICAgY3JlYXRlZEF0OiB0d2VldC5jcmVhdGVkQXQudG9JU09TdHJpbmcoKSxcbiAgICAgIGxpa2VzOiB0d2VldC5fY291bnQubGlrZXMsXG4gICAgICByZXR3ZWV0czogdHdlZXQuX2NvdW50LnJldHdlZXRzLFxuICAgICAgcmVwbGllczogMCwgLy8gQ29tbWVudCBjb3VudCBmb3IgbmV3bHkgY3JlYXRlZCB0d2VldFxuICAgICAgbWVkaWE6IHR3ZWV0Lm1lZGlhLm1hcCgobTogYW55KSA9PiAoe1xuICAgICAgICBpZDogbS5pZCxcbiAgICAgICAgdHlwZTogbS50eXBlIGFzICdpbWFnZScgfCAndmlkZW8nLFxuICAgICAgICB1cmw6IG0udXJsLFxuICAgICAgICB0aHVtYm5haWxVcmw6IG0udGh1bWJuYWlsVXJsIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgYWx0OiBtLmFsdCB8fCB1bmRlZmluZWQsXG4gICAgICB9KSksXG4gICAgICBpc0xpa2VkOiBmYWxzZSxcbiAgICAgIGlzUmV0d2VldGVkOiBmYWxzZSxcbiAgICB9O1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHRyYW5zZm9ybWVkVHdlZXQsIHsgc3RhdHVzOiAyMDEgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgdHdlZXQ6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gY3JlYXRlIHR3ZWV0JyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInByaXNtYSIsInNlZWRJbml0aWFsRGF0YSIsInVzZXJDb3VudCIsInVzZXIiLCJjb3VudCIsInVzZXIxIiwiY3JlYXRlIiwiZGF0YSIsImlkIiwid29ybGRjb2luSWQiLCJ1c2VybmFtZSIsImRpc3BsYXlOYW1lIiwiYXZhdGFyIiwicHJvZmlsZVBpY3R1cmVVcmwiLCJpc1ZlcmlmaWVkIiwiYmlvIiwidXNlcjIiLCJ1c2VyMyIsInR3ZWV0IiwiY29udGVudCIsImF1dGhvcklkIiwiY3JlYXRlZEF0IiwiRGF0ZSIsIm5vdyIsInR3ZWV0MyIsIm1lZGlhIiwidHdlZXRJZCIsInR5cGUiLCJ1cmwiLCJ0aHVtYm5haWxVcmwiLCJHRVQiLCJyZXF1ZXN0Iiwic2VhcmNoUGFyYW1zIiwiVVJMIiwibGltaXQiLCJwYXJzZUludCIsImdldCIsIm9mZnNldCIsInVzZXJJZCIsInR3ZWV0cyIsImZpbmRNYW55IiwiaW5jbHVkZSIsImF1dGhvciIsIl9jb3VudCIsInNlbGVjdCIsImxpa2VzIiwicmV0d2VldHMiLCJvcmRlckJ5Iiwic2tpcCIsInRha2UiLCJ0b3RhbENvdW50IiwidXNlckludGVyYWN0aW9ucyIsInR3ZWV0SWRzIiwibWFwIiwiUHJvbWlzZSIsImFsbCIsImxpa2UiLCJ3aGVyZSIsImluIiwicmV0d2VldCIsImxpa2VkVHdlZXRJZHMiLCJTZXQiLCJyZXR3ZWV0ZWRUd2VldElkcyIsInJlZHVjZSIsImFjYyIsImlzTGlrZWQiLCJoYXMiLCJpc1JldHdlZXRlZCIsImNvbW1lbnRDb3VudHMiLCJjb21tZW50IiwiY29tbWVudENvdW50TWFwIiwidHJhbnNmb3JtZWRUd2VldHMiLCJ1bmRlZmluZWQiLCJ3YWxsZXRBZGRyZXNzIiwidG9JU09TdHJpbmciLCJyZXBsaWVzIiwibSIsImFsdCIsImpzb24iLCJoYXNNb3JlIiwidG90YWwiLCJlcnJvciIsImNvbnNvbGUiLCJzdGF0dXMiLCJQT1NUIiwiYm9keSIsImxlbmd0aCIsImZpbmRGaXJzdCIsIk9SIiwibnVsbGlmaWVySGFzaCIsImlzV29ybGRJZFVzZXIiLCJzdGFydHNXaXRoIiwiaXNXYWxsZXRVc2VyIiwic2xpY2UiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsImluY2x1ZGVzIiwidmVyaWZpY2F0aW9uTGV2ZWwiLCJpdGVtIiwidHJhbnNmb3JtZWRUd2VldCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/tweets/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNkM7QUFFN0MsTUFBTUMsa0JBQWtCQztBQUlqQixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSCx3REFBWUEsR0FBRTtBQUVsRSxJQUFJSSxJQUF5QixFQUFjSCxnQkFBZ0JFLE1BQU0sR0FBR0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly94LXdvcmxkLW1pbmktYXBwLy4vc3JjL2xpYi9wcmlzbWEudHM/MDFkNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCdcblxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsVGhpcyBhcyB1bmtub3duIGFzIHtcbiAgcHJpc21hOiBQcmlzbWFDbGllbnQgfCB1bmRlZmluZWRcbn1cblxuZXhwb3J0IGNvbnN0IHByaXNtYSA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPz8gbmV3IFByaXNtYUNsaWVudCgpXG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID0gcHJpc21hXG4iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsVGhpcyIsInByaXNtYSIsInByb2Nlc3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftweets%2Froute&page=%2Fapi%2Ftweets%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftweets%2Froute.ts&appDir=%2FUsers%2Fethan%2FDesktop%2FH%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fethan%2FDesktop%2FH&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();