"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/gamification/user/[userId]/route";
exports.ids = ["app/api/gamification/user/[userId]/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgamification%2Fuser%2F%5BuserId%5D%2Froute&page=%2Fapi%2Fgamification%2Fuser%2F%5BuserId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgamification%2Fuser%2F%5BuserId%5D%2Froute.ts&appDir=%2FUsers%2Fethan%2FDesktop%2FH%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fethan%2FDesktop%2FH&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgamification%2Fuser%2F%5BuserId%5D%2Froute&page=%2Fapi%2Fgamification%2Fuser%2F%5BuserId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgamification%2Fuser%2F%5BuserId%5D%2Froute.ts&appDir=%2FUsers%2Fethan%2FDesktop%2FH%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fethan%2FDesktop%2FH&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_ethan_Desktop_H_src_app_api_gamification_user_userId_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/gamification/user/[userId]/route.ts */ \"(rsc)/./src/app/api/gamification/user/[userId]/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/gamification/user/[userId]/route\",\n        pathname: \"/api/gamification/user/[userId]\",\n        filename: \"route\",\n        bundlePath: \"app/api/gamification/user/[userId]/route\"\n    },\n    resolvedPagePath: \"/Users/ethan/Desktop/H/src/app/api/gamification/user/[userId]/route.ts\",\n    nextConfigOutput,\n    userland: _Users_ethan_Desktop_H_src_app_api_gamification_user_userId_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/gamification/user/[userId]/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZnYW1pZmljYXRpb24lMkZ1c2VyJTJGJTVCdXNlcklkJTVEJTJGcm91dGUmcGFnZT0lMkZhcGklMkZnYW1pZmljYXRpb24lMkZ1c2VyJTJGJTVCdXNlcklkJTVEJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGZ2FtaWZpY2F0aW9uJTJGdXNlciUyRiU1QnVzZXJJZCU1RCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmV0aGFuJTJGRGVza3RvcCUyRkglMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGZXRoYW4lMkZEZXNrdG9wJTJGSCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDc0I7QUFDbkc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly94LXdvcmxkLW1pbmktYXBwLz85Njc1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9ldGhhbi9EZXNrdG9wL0gvc3JjL2FwcC9hcGkvZ2FtaWZpY2F0aW9uL3VzZXIvW3VzZXJJZF0vcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2dhbWlmaWNhdGlvbi91c2VyL1t1c2VySWRdL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZ2FtaWZpY2F0aW9uL3VzZXIvW3VzZXJJZF1cIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2dhbWlmaWNhdGlvbi91c2VyL1t1c2VySWRdL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2V0aGFuL0Rlc2t0b3AvSC9zcmMvYXBwL2FwaS9nYW1pZmljYXRpb24vdXNlci9bdXNlcklkXS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvZ2FtaWZpY2F0aW9uL3VzZXIvW3VzZXJJZF0vcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgamification%2Fuser%2F%5BuserId%5D%2Froute&page=%2Fapi%2Fgamification%2Fuser%2F%5BuserId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgamification%2Fuser%2F%5BuserId%5D%2Froute.ts&appDir=%2FUsers%2Fethan%2FDesktop%2FH%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fethan%2FDesktop%2FH&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/gamification/user/[userId]/route.ts":
/*!*********************************************************!*\
  !*** ./src/app/api/gamification/user/[userId]/route.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _lib_gamification_statsService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/gamification/statsService */ \"(rsc)/./src/lib/gamification/statsService.ts\");\n/* harmony import */ var _lib_gamification_rankService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/gamification/rankService */ \"(rsc)/./src/lib/gamification/rankService.ts\");\n/**\n * User Rank API Route\n * \n * Fetch user rank, progress, and tags\n */ \n\n\n\nconst dynamic = \"force-dynamic\";\nasync function GET(request, { params }) {\n    try {\n        const { userId } = params;\n        // Get user\n        const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.user.findUnique({\n            where: {\n                id: userId\n            },\n            select: {\n                id: true,\n                username: true,\n                displayName: true,\n                avatar: true,\n                profilePictureUrl: true,\n                currentRank: true,\n                rankScore: true,\n                isVerified: true\n            }\n        });\n        if (!user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"User not found\"\n            }, {\n                status: 404\n            });\n        }\n        // Get user tags\n        const userTags = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.userTag.findMany({\n            where: {\n                userId\n            },\n            include: {\n                tag: {\n                    include: {\n                        season: true\n                    }\n                }\n            },\n            orderBy: {\n                grantedAt: \"desc\"\n            }\n        });\n        // Compute current rank progress\n        const stats = await (0,_lib_gamification_statsService__WEBPACK_IMPORTED_MODULE_2__.collectUserStats)(userId);\n        const rankResult = (0,_lib_gamification_rankService__WEBPACK_IMPORTED_MODULE_3__.computeRankForUser)(stats);\n        // Format tags\n        const tags = userTags.map((ut)=>({\n                id: ut.tag.id,\n                name: ut.tag.name,\n                description: ut.tag.description,\n                isLimited: ut.tag.isLimited,\n                seasonName: ut.tag.season?.name,\n                seasonTheme: ut.tag.season?.theme,\n                grantedAt: ut.grantedAt,\n                reason: ut.reason\n            }));\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            user: {\n                id: user.id,\n                username: user.username,\n                displayName: user.displayName,\n                avatar: user.avatar || user.profilePictureUrl,\n                isVerified: user.isVerified\n            },\n            rank: {\n                current: user.currentRank,\n                currentDisplayName: (0,_lib_gamification_rankService__WEBPACK_IMPORTED_MODULE_3__.getRankDisplayName)(user.currentRank),\n                score: user.rankScore,\n                nextRank: rankResult.nextRank,\n                nextRankDisplayName: rankResult.nextRank ? (0,_lib_gamification_rankService__WEBPACK_IMPORTED_MODULE_3__.getRankDisplayName)(rankResult.nextRank) : null,\n                progressToNext: rankResult.progressToNext,\n                requirements: rankResult.requirements\n            },\n            tags,\n            stats: {\n                streakDays: stats.streakDays,\n                totalTweets: stats.totalTweets,\n                totalComments: stats.totalComments,\n                avgEngagement: stats.avgEngagementPerPost,\n                successfulInvites: stats.successfulInvitesCount\n            }\n        });\n    } catch (error) {\n        console.error(\"Error fetching user rank:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to fetch user rank\",\n            message: error instanceof Error ? error.message : \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9nYW1pZmljYXRpb24vdXNlci9bdXNlcklkXS9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7OztDQUlDLEdBRXVEO0FBQ2xCO0FBQzZCO0FBQ3FCO0FBRWpGLE1BQU1LLFVBQVUsZ0JBQWdCO0FBRWhDLGVBQWVDLElBQ3BCQyxPQUFvQixFQUNwQixFQUFFQyxNQUFNLEVBQWtDO0lBRTFDLElBQUk7UUFDRixNQUFNLEVBQUVDLE1BQU0sRUFBRSxHQUFHRDtRQUVuQixXQUFXO1FBQ1gsTUFBTUUsT0FBTyxNQUFNVCwrQ0FBTUEsQ0FBQ1MsSUFBSSxDQUFDQyxVQUFVLENBQUM7WUFDeENDLE9BQU87Z0JBQUVDLElBQUlKO1lBQU87WUFDcEJLLFFBQVE7Z0JBQ05ELElBQUk7Z0JBQ0pFLFVBQVU7Z0JBQ1ZDLGFBQWE7Z0JBQ2JDLFFBQVE7Z0JBQ1JDLG1CQUFtQjtnQkFDbkJDLGFBQWE7Z0JBQ2JDLFdBQVc7Z0JBQ1hDLFlBQVk7WUFDZDtRQUNGO1FBRUEsSUFBSSxDQUFDWCxNQUFNO1lBQ1QsT0FBT1YscURBQVlBLENBQUNzQixJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQWlCLEdBQzFCO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxnQkFBZ0I7UUFDaEIsTUFBTUMsV0FBVyxNQUFNeEIsK0NBQU1BLENBQUN5QixPQUFPLENBQUNDLFFBQVEsQ0FBQztZQUM3Q2YsT0FBTztnQkFBRUg7WUFBTztZQUNoQm1CLFNBQVM7Z0JBQ1BDLEtBQUs7b0JBQ0hELFNBQVM7d0JBQ1BFLFFBQVE7b0JBQ1Y7Z0JBQ0Y7WUFDRjtZQUNBQyxTQUFTO2dCQUFFQyxXQUFXO1lBQU87UUFDL0I7UUFFQSxnQ0FBZ0M7UUFDaEMsTUFBTUMsUUFBUSxNQUFNL0IsZ0ZBQWdCQSxDQUFDTztRQUNyQyxNQUFNeUIsYUFBYS9CLGlGQUFrQkEsQ0FBQzhCO1FBRXRDLGNBQWM7UUFDZCxNQUFNRSxPQUFPVixTQUFTVyxHQUFHLENBQUMsQ0FBQ0MsS0FBYTtnQkFDdEN4QixJQUFJd0IsR0FBR1IsR0FBRyxDQUFDaEIsRUFBRTtnQkFDYnlCLE1BQU1ELEdBQUdSLEdBQUcsQ0FBQ1MsSUFBSTtnQkFDakJDLGFBQWFGLEdBQUdSLEdBQUcsQ0FBQ1UsV0FBVztnQkFDL0JDLFdBQVdILEdBQUdSLEdBQUcsQ0FBQ1csU0FBUztnQkFDM0JDLFlBQVlKLEdBQUdSLEdBQUcsQ0FBQ0MsTUFBTSxFQUFFUTtnQkFDM0JJLGFBQWFMLEdBQUdSLEdBQUcsQ0FBQ0MsTUFBTSxFQUFFYTtnQkFDNUJYLFdBQVdLLEdBQUdMLFNBQVM7Z0JBQ3ZCWSxRQUFRUCxHQUFHTyxNQUFNO1lBQ25CO1FBRUEsT0FBTzVDLHFEQUFZQSxDQUFDc0IsSUFBSSxDQUFDO1lBQ3ZCdUIsU0FBUztZQUNUbkMsTUFBTTtnQkFDSkcsSUFBSUgsS0FBS0csRUFBRTtnQkFDWEUsVUFBVUwsS0FBS0ssUUFBUTtnQkFDdkJDLGFBQWFOLEtBQUtNLFdBQVc7Z0JBQzdCQyxRQUFRUCxLQUFLTyxNQUFNLElBQUlQLEtBQUtRLGlCQUFpQjtnQkFDN0NHLFlBQVlYLEtBQUtXLFVBQVU7WUFDN0I7WUFDQXlCLE1BQU07Z0JBQ0pDLFNBQVNyQyxLQUFLUyxXQUFXO2dCQUN6QjZCLG9CQUFvQjVDLGlGQUFrQkEsQ0FBQ00sS0FBS1MsV0FBVztnQkFDdkQ4QixPQUFPdkMsS0FBS1UsU0FBUztnQkFDckI4QixVQUFVaEIsV0FBV2dCLFFBQVE7Z0JBQzdCQyxxQkFBcUJqQixXQUFXZ0IsUUFBUSxHQUFHOUMsaUZBQWtCQSxDQUFDOEIsV0FBV2dCLFFBQVEsSUFBSTtnQkFDckZFLGdCQUFnQmxCLFdBQVdrQixjQUFjO2dCQUN6Q0MsY0FBY25CLFdBQVdtQixZQUFZO1lBQ3ZDO1lBQ0FsQjtZQUNBRixPQUFPO2dCQUNMcUIsWUFBWXJCLE1BQU1xQixVQUFVO2dCQUM1QkMsYUFBYXRCLE1BQU1zQixXQUFXO2dCQUM5QkMsZUFBZXZCLE1BQU11QixhQUFhO2dCQUNsQ0MsZUFBZXhCLE1BQU15QixvQkFBb0I7Z0JBQ3pDQyxtQkFBbUIxQixNQUFNMkIsc0JBQXNCO1lBQ2pEO1FBQ0Y7SUFDRixFQUFFLE9BQU9yQyxPQUFPO1FBQ2RzQyxRQUFRdEMsS0FBSyxDQUFDLDZCQUE2QkE7UUFDM0MsT0FBT3ZCLHFEQUFZQSxDQUFDc0IsSUFBSSxDQUN0QjtZQUNFQyxPQUFPO1lBQ1B1QyxTQUFTdkMsaUJBQWlCd0MsUUFBUXhDLE1BQU11QyxPQUFPLEdBQUc7UUFDcEQsR0FDQTtZQUFFdEMsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly94LXdvcmxkLW1pbmktYXBwLy4vc3JjL2FwcC9hcGkvZ2FtaWZpY2F0aW9uL3VzZXIvW3VzZXJJZF0vcm91dGUudHM/MDQ1YSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFVzZXIgUmFuayBBUEkgUm91dGVcbiAqIFxuICogRmV0Y2ggdXNlciByYW5rLCBwcm9ncmVzcywgYW5kIHRhZ3NcbiAqL1xuXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSAnQC9saWIvcHJpc21hJztcbmltcG9ydCB7IGNvbGxlY3RVc2VyU3RhdHMgfSBmcm9tICdAL2xpYi9nYW1pZmljYXRpb24vc3RhdHNTZXJ2aWNlJztcbmltcG9ydCB7IGNvbXB1dGVSYW5rRm9yVXNlciwgZ2V0UmFua0Rpc3BsYXlOYW1lIH0gZnJvbSAnQC9saWIvZ2FtaWZpY2F0aW9uL3JhbmtTZXJ2aWNlJztcblxuZXhwb3J0IGNvbnN0IGR5bmFtaWMgPSAnZm9yY2UtZHluYW1pYyc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoXG4gIHJlcXVlc3Q6IE5leHRSZXF1ZXN0LFxuICB7IHBhcmFtcyB9OiB7IHBhcmFtczogeyB1c2VySWQ6IHN0cmluZyB9IH1cbikge1xuICB0cnkge1xuICAgIGNvbnN0IHsgdXNlcklkIH0gPSBwYXJhbXM7XG5cbiAgICAvLyBHZXQgdXNlclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcbiAgICAgIHNlbGVjdDoge1xuICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgdXNlcm5hbWU6IHRydWUsXG4gICAgICAgIGRpc3BsYXlOYW1lOiB0cnVlLFxuICAgICAgICBhdmF0YXI6IHRydWUsXG4gICAgICAgIHByb2ZpbGVQaWN0dXJlVXJsOiB0cnVlLFxuICAgICAgICBjdXJyZW50UmFuazogdHJ1ZSxcbiAgICAgICAgcmFua1Njb3JlOiB0cnVlLFxuICAgICAgICBpc1ZlcmlmaWVkOiB0cnVlLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGlmICghdXNlcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnVXNlciBub3QgZm91bmQnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDQgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBHZXQgdXNlciB0YWdzXG4gICAgY29uc3QgdXNlclRhZ3MgPSBhd2FpdCBwcmlzbWEudXNlclRhZy5maW5kTWFueSh7XG4gICAgICB3aGVyZTogeyB1c2VySWQgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgdGFnOiB7XG4gICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgc2Vhc29uOiB0cnVlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgb3JkZXJCeTogeyBncmFudGVkQXQ6ICdkZXNjJyB9LFxuICAgIH0pO1xuXG4gICAgLy8gQ29tcHV0ZSBjdXJyZW50IHJhbmsgcHJvZ3Jlc3NcbiAgICBjb25zdCBzdGF0cyA9IGF3YWl0IGNvbGxlY3RVc2VyU3RhdHModXNlcklkKTtcbiAgICBjb25zdCByYW5rUmVzdWx0ID0gY29tcHV0ZVJhbmtGb3JVc2VyKHN0YXRzKTtcblxuICAgIC8vIEZvcm1hdCB0YWdzXG4gICAgY29uc3QgdGFncyA9IHVzZXJUYWdzLm1hcCgodXQ6IGFueSkgPT4gKHtcbiAgICAgIGlkOiB1dC50YWcuaWQsXG4gICAgICBuYW1lOiB1dC50YWcubmFtZSxcbiAgICAgIGRlc2NyaXB0aW9uOiB1dC50YWcuZGVzY3JpcHRpb24sXG4gICAgICBpc0xpbWl0ZWQ6IHV0LnRhZy5pc0xpbWl0ZWQsXG4gICAgICBzZWFzb25OYW1lOiB1dC50YWcuc2Vhc29uPy5uYW1lLFxuICAgICAgc2Vhc29uVGhlbWU6IHV0LnRhZy5zZWFzb24/LnRoZW1lLFxuICAgICAgZ3JhbnRlZEF0OiB1dC5ncmFudGVkQXQsXG4gICAgICByZWFzb246IHV0LnJlYXNvbixcbiAgICB9KSk7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgaWQ6IHVzZXIuaWQsXG4gICAgICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLFxuICAgICAgICBkaXNwbGF5TmFtZTogdXNlci5kaXNwbGF5TmFtZSxcbiAgICAgICAgYXZhdGFyOiB1c2VyLmF2YXRhciB8fCB1c2VyLnByb2ZpbGVQaWN0dXJlVXJsLFxuICAgICAgICBpc1ZlcmlmaWVkOiB1c2VyLmlzVmVyaWZpZWQsXG4gICAgICB9LFxuICAgICAgcmFuazoge1xuICAgICAgICBjdXJyZW50OiB1c2VyLmN1cnJlbnRSYW5rLFxuICAgICAgICBjdXJyZW50RGlzcGxheU5hbWU6IGdldFJhbmtEaXNwbGF5TmFtZSh1c2VyLmN1cnJlbnRSYW5rIGFzIGFueSksXG4gICAgICAgIHNjb3JlOiB1c2VyLnJhbmtTY29yZSxcbiAgICAgICAgbmV4dFJhbms6IHJhbmtSZXN1bHQubmV4dFJhbmssXG4gICAgICAgIG5leHRSYW5rRGlzcGxheU5hbWU6IHJhbmtSZXN1bHQubmV4dFJhbmsgPyBnZXRSYW5rRGlzcGxheU5hbWUocmFua1Jlc3VsdC5uZXh0UmFuaykgOiBudWxsLFxuICAgICAgICBwcm9ncmVzc1RvTmV4dDogcmFua1Jlc3VsdC5wcm9ncmVzc1RvTmV4dCxcbiAgICAgICAgcmVxdWlyZW1lbnRzOiByYW5rUmVzdWx0LnJlcXVpcmVtZW50cyxcbiAgICAgIH0sXG4gICAgICB0YWdzLFxuICAgICAgc3RhdHM6IHtcbiAgICAgICAgc3RyZWFrRGF5czogc3RhdHMuc3RyZWFrRGF5cyxcbiAgICAgICAgdG90YWxUd2VldHM6IHN0YXRzLnRvdGFsVHdlZXRzLFxuICAgICAgICB0b3RhbENvbW1lbnRzOiBzdGF0cy50b3RhbENvbW1lbnRzLFxuICAgICAgICBhdmdFbmdhZ2VtZW50OiBzdGF0cy5hdmdFbmdhZ2VtZW50UGVyUG9zdCxcbiAgICAgICAgc3VjY2Vzc2Z1bEludml0ZXM6IHN0YXRzLnN1Y2Nlc3NmdWxJbnZpdGVzQ291bnQsXG4gICAgICB9LFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXIgcmFuazonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAge1xuICAgICAgICBlcnJvcjogJ0ZhaWxlZCB0byBmZXRjaCB1c2VyIHJhbmsnLFxuICAgICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicHJpc21hIiwiY29sbGVjdFVzZXJTdGF0cyIsImNvbXB1dGVSYW5rRm9yVXNlciIsImdldFJhbmtEaXNwbGF5TmFtZSIsImR5bmFtaWMiLCJHRVQiLCJyZXF1ZXN0IiwicGFyYW1zIiwidXNlcklkIiwidXNlciIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImlkIiwic2VsZWN0IiwidXNlcm5hbWUiLCJkaXNwbGF5TmFtZSIsImF2YXRhciIsInByb2ZpbGVQaWN0dXJlVXJsIiwiY3VycmVudFJhbmsiLCJyYW5rU2NvcmUiLCJpc1ZlcmlmaWVkIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwidXNlclRhZ3MiLCJ1c2VyVGFnIiwiZmluZE1hbnkiLCJpbmNsdWRlIiwidGFnIiwic2Vhc29uIiwib3JkZXJCeSIsImdyYW50ZWRBdCIsInN0YXRzIiwicmFua1Jlc3VsdCIsInRhZ3MiLCJtYXAiLCJ1dCIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsImlzTGltaXRlZCIsInNlYXNvbk5hbWUiLCJzZWFzb25UaGVtZSIsInRoZW1lIiwicmVhc29uIiwic3VjY2VzcyIsInJhbmsiLCJjdXJyZW50IiwiY3VycmVudERpc3BsYXlOYW1lIiwic2NvcmUiLCJuZXh0UmFuayIsIm5leHRSYW5rRGlzcGxheU5hbWUiLCJwcm9ncmVzc1RvTmV4dCIsInJlcXVpcmVtZW50cyIsInN0cmVha0RheXMiLCJ0b3RhbFR3ZWV0cyIsInRvdGFsQ29tbWVudHMiLCJhdmdFbmdhZ2VtZW50IiwiYXZnRW5nYWdlbWVudFBlclBvc3QiLCJzdWNjZXNzZnVsSW52aXRlcyIsInN1Y2Nlc3NmdWxJbnZpdGVzQ291bnQiLCJjb25zb2xlIiwibWVzc2FnZSIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/gamification/user/[userId]/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/gamification/rankService.ts":
/*!*********************************************!*\
  !*** ./src/lib/gamification/rankService.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   computeRankForUser: () => (/* binding */ computeRankForUser),\n/* harmony export */   getRankColor: () => (/* binding */ getRankColor),\n/* harmony export */   getRankDisplayName: () => (/* binding */ getRankDisplayName),\n/* harmony export */   getRankIcon: () => (/* binding */ getRankIcon),\n/* harmony export */   getRankLevel: () => (/* binding */ getRankLevel),\n/* harmony export */   qualifiesForInfinity: () => (/* binding */ qualifiesForInfinity)\n/* harmony export */ });\n/**\n * Rank Computation Service\n * \n * Pure functions for computing user ranks based on their stats.\n * This service implements the progression criteria:\n * - Constancy (streak / daily activity)\n * - Contribution (posts, comments, participation)\n * - Content quality (average engagement per post)\n * - Impact (likes from humans, comments from humans)\n * - Invitations (successful invites)\n */ // Rank thresholds - tuned for balanced progression\nconst RANK_THRESHOLDS = {\n    HUMAN_VERIFIED: 0,\n    HUMAN_EXPLORER: 100,\n    HUMAN_PIONEER: 500,\n    HUMAN_ELITE: 2000,\n    HUMAN_LEGEND: 5000,\n    HUMAN_INFINITY: 10000\n};\n// Scoring weights for different criteria\nconst SCORING_WEIGHTS = {\n    // Constancy: Daily activity and streaks\n    streakDays: 5,\n    streakBonus: 2,\n    // Contribution: Content creation\n    tweets: 10,\n    comments: 5,\n    // Quality: Engagement metrics\n    avgEngagement: 20,\n    // Impact: Human-to-human interactions\n    likesFromHumans: 3,\n    commentsFromHumans: 8,\n    // Invitations: Network growth\n    invites: 50,\n    // Longevity: Time on platform\n    veteranBonus: 1\n};\n/**\n * Compute the rank and score for a user based on their stats\n * This is a pure function - no side effects, easy to test\n */ function computeRankForUser(stats) {\n    // Calculate base score from all criteria\n    let score = 0;\n    // 1. Constancy score\n    score += stats.streakDays * SCORING_WEIGHTS.streakDays;\n    if (stats.streakDays >= 30) {\n        score += stats.streakDays * SCORING_WEIGHTS.streakBonus; // Bonus for long streaks\n    }\n    // 2. Contribution score\n    score += stats.totalTweets * SCORING_WEIGHTS.tweets;\n    score += stats.totalComments * SCORING_WEIGHTS.comments;\n    // 3. Quality score (engagement)\n    score += stats.avgEngagementPerPost * SCORING_WEIGHTS.avgEngagement;\n    // 4. Impact score (human interactions)\n    score += stats.likesFromVerifiedHumans * SCORING_WEIGHTS.likesFromHumans;\n    score += stats.commentsFromVerifiedHumans * SCORING_WEIGHTS.commentsFromHumans;\n    // 5. Network growth score\n    score += stats.successfulInvitesCount * SCORING_WEIGHTS.invites;\n    // 6. Veteran bonus\n    score += stats.daysSinceJoin * SCORING_WEIGHTS.veteranBonus;\n    // Round to nearest integer\n    const rankScore = Math.round(score);\n    // Determine rank based on score (excluding HUMAN_INFINITY which is vote-based)\n    let currentRank = \"HUMAN_VERIFIED\";\n    let nextRank = \"HUMAN_EXPLORER\";\n    if (rankScore >= RANK_THRESHOLDS.HUMAN_LEGEND) {\n        currentRank = \"HUMAN_LEGEND\";\n        nextRank = \"HUMAN_INFINITY\";\n    } else if (rankScore >= RANK_THRESHOLDS.HUMAN_ELITE) {\n        currentRank = \"HUMAN_ELITE\";\n        nextRank = \"HUMAN_LEGEND\";\n    } else if (rankScore >= RANK_THRESHOLDS.HUMAN_PIONEER) {\n        currentRank = \"HUMAN_PIONEER\";\n        nextRank = \"HUMAN_ELITE\";\n    } else if (rankScore >= RANK_THRESHOLDS.HUMAN_EXPLORER) {\n        currentRank = \"HUMAN_EXPLORER\";\n        nextRank = \"HUMAN_PIONEER\";\n    }\n    // Calculate progress to next rank (0-1)\n    let progressToNext = 0;\n    if (nextRank && nextRank !== \"HUMAN_INFINITY\") {\n        const currentThreshold = RANK_THRESHOLDS[currentRank];\n        const nextThreshold = RANK_THRESHOLDS[nextRank];\n        progressToNext = Math.min((rankScore - currentThreshold) / (nextThreshold - currentThreshold), 1);\n    }\n    // Build requirements feedback\n    const requirements = analyzeRequirements(stats, currentRank, nextRank);\n    return {\n        rank: currentRank,\n        rankScore,\n        progressToNext,\n        nextRank,\n        requirements\n    };\n}\n/**\n * Analyze which requirements are met vs pending for rank progression\n */ function analyzeRequirements(stats, currentRank, nextRank) {\n    const met = [];\n    const pending = [];\n    // Streak requirements\n    if (stats.streakDays >= 7) {\n        met.push(`7+ day streak (${stats.streakDays} days)`);\n    } else {\n        pending.push(`Maintain a 7-day streak (current: ${stats.streakDays} days)`);\n    }\n    // Content requirements\n    if (stats.totalTweets >= 10) {\n        met.push(`10+ posts (${stats.totalTweets} posts)`);\n    } else {\n        pending.push(`Create 10+ posts (current: ${stats.totalTweets})`);\n    }\n    // Engagement requirements\n    if (stats.avgEngagementPerPost >= 2) {\n        met.push(`Quality content (${stats.avgEngagementPerPost.toFixed(1)} avg engagement)`);\n    } else {\n        pending.push(`Improve engagement (current: ${stats.avgEngagementPerPost.toFixed(1)} avg)`);\n    }\n    // Human interaction requirements\n    if (stats.likesFromVerifiedHumans >= 10) {\n        met.push(`10+ likes from humans (${stats.likesFromVerifiedHumans})`);\n    } else {\n        pending.push(`Get 10+ likes from verified humans (current: ${stats.likesFromVerifiedHumans})`);\n    }\n    // Invitation requirements (for higher ranks)\n    if (currentRank === \"HUMAN_PIONEER\" || currentRank === \"HUMAN_ELITE\" || currentRank === \"HUMAN_LEGEND\") {\n        if (stats.successfulInvitesCount >= 3) {\n            met.push(`Invited ${stats.successfulInvitesCount} humans`);\n        } else {\n            pending.push(`Invite 3+ humans to join (current: ${stats.successfulInvitesCount})`);\n        }\n    }\n    return {\n        met,\n        pending\n    };\n}\n/**\n * Check if a user qualifies for Human Infinity based on votes\n * Requires: \n * - Already at HUMAN_LEGEND rank\n * - At least 10 votes from different HUMAN_LEGEND or HUMAN_INFINITY users\n * - Score threshold met\n */ function qualifiesForInfinity(currentRank, rankScore, infinityVotesCount) {\n    return currentRank === \"HUMAN_LEGEND\" && rankScore >= RANK_THRESHOLDS.HUMAN_INFINITY && infinityVotesCount >= 10;\n}\n/**\n * Get rank display name for UI\n */ function getRankDisplayName(rank) {\n    const names = {\n        HUMAN_VERIFIED: \"Human Verified\",\n        HUMAN_EXPLORER: \"Human Explorer\",\n        HUMAN_PIONEER: \"Human Pioneer\",\n        HUMAN_ELITE: \"Human Elite\",\n        HUMAN_LEGEND: \"Human Legend\",\n        HUMAN_INFINITY: \"Human Infinity\"\n    };\n    return names[rank];\n}\n/**\n * Get rank level (0-5) for comparison\n */ function getRankLevel(rank) {\n    const levels = {\n        HUMAN_VERIFIED: 0,\n        HUMAN_EXPLORER: 1,\n        HUMAN_PIONEER: 2,\n        HUMAN_ELITE: 3,\n        HUMAN_LEGEND: 4,\n        HUMAN_INFINITY: 5\n    };\n    return levels[rank];\n}\n/**\n * Get rank color for UI\n */ function getRankColor(rank) {\n    const colors = {\n        HUMAN_VERIFIED: \"#00FFBE\",\n        HUMAN_EXPLORER: \"#00D9FF\",\n        HUMAN_PIONEER: \"#6366F1\",\n        HUMAN_ELITE: \"#A855F7\",\n        HUMAN_LEGEND: \"#F59E0B\",\n        HUMAN_INFINITY: \"#EC4899\"\n    };\n    return colors[rank];\n}\n/**\n * Get rank icon/emoji for UI\n */ function getRankIcon(rank) {\n    const icons = {\n        HUMAN_VERIFIED: \"✓\",\n        HUMAN_EXPLORER: \"\\uD83C\\uDF0D\",\n        HUMAN_PIONEER: \"\\uD83D\\uDE80\",\n        HUMAN_ELITE: \"\\uD83D\\uDC51\",\n        HUMAN_LEGEND: \"⭐\",\n        HUMAN_INFINITY: \"∞\"\n    };\n    return icons[rank];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2dhbWlmaWNhdGlvbi9yYW5rU2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7OztDQVVDLEdBSUQsbURBQW1EO0FBQ25ELE1BQU1BLGtCQUFrQjtJQUN0QkMsZ0JBQWdCO0lBQ2hCQyxnQkFBZ0I7SUFDaEJDLGVBQWU7SUFDZkMsYUFBYTtJQUNiQyxjQUFjO0lBQ2RDLGdCQUFnQjtBQUNsQjtBQUVBLHlDQUF5QztBQUN6QyxNQUFNQyxrQkFBa0I7SUFDdEIsd0NBQXdDO0lBQ3hDQyxZQUFZO0lBQ1pDLGFBQWE7SUFFYixpQ0FBaUM7SUFDakNDLFFBQVE7SUFDUkMsVUFBVTtJQUVWLDhCQUE4QjtJQUM5QkMsZUFBZTtJQUVmLHNDQUFzQztJQUN0Q0MsaUJBQWlCO0lBQ2pCQyxvQkFBb0I7SUFFcEIsOEJBQThCO0lBQzlCQyxTQUFTO0lBRVQsOEJBQThCO0lBQzlCQyxjQUFjO0FBQ2hCO0FBRUE7OztDQUdDLEdBQ00sU0FBU0MsbUJBQW1CQyxLQUFnQjtJQUNqRCx5Q0FBeUM7SUFDekMsSUFBSUMsUUFBUTtJQUVaLHFCQUFxQjtJQUNyQkEsU0FBU0QsTUFBTVYsVUFBVSxHQUFHRCxnQkFBZ0JDLFVBQVU7SUFDdEQsSUFBSVUsTUFBTVYsVUFBVSxJQUFJLElBQUk7UUFDMUJXLFNBQVNELE1BQU1WLFVBQVUsR0FBR0QsZ0JBQWdCRSxXQUFXLEVBQUUseUJBQXlCO0lBQ3BGO0lBRUEsd0JBQXdCO0lBQ3hCVSxTQUFTRCxNQUFNRSxXQUFXLEdBQUdiLGdCQUFnQkcsTUFBTTtJQUNuRFMsU0FBU0QsTUFBTUcsYUFBYSxHQUFHZCxnQkFBZ0JJLFFBQVE7SUFFdkQsZ0NBQWdDO0lBQ2hDUSxTQUFTRCxNQUFNSSxvQkFBb0IsR0FBR2YsZ0JBQWdCSyxhQUFhO0lBRW5FLHVDQUF1QztJQUN2Q08sU0FBU0QsTUFBTUssdUJBQXVCLEdBQUdoQixnQkFBZ0JNLGVBQWU7SUFDeEVNLFNBQVNELE1BQU1NLDBCQUEwQixHQUFH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O0FBQ3JCO0FBRUE7O0NBRUMsR0FDTSxTQUFTYSxZQUFZYixJQUFlO0lBQ3pDLE1BQU1jLFFBQW1DO1FBQ3ZDbkQsZ0JBQWdCO1FBQ2hCQyxnQkFBZ0I7UUFDaEJDLGVBQWU7UUFDZkMsYUFBYTtRQUNiQyxjQUFjO1FBQ2RDLGdCQUFnQjtJQUNsQjtJQUNBLE9BQU84QyxLQUFLLENBQUNkLEtBQUs7QUFDcEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly94LXdvcmxkLW1pbmktYXBwLy4vc3JjL2xpYi9nYW1pZmljYXRpb24vcmFua1NlcnZpY2UudHM/YzQ4OCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFJhbmsgQ29tcHV0YXRpb24gU2VydmljZVxuICogXG4gKiBQdXJlIGZ1bmN0aW9ucyBmb3IgY29tcHV0aW5nIHVzZXIgcmFua3MgYmFzZWQgb24gdGhlaXIgc3RhdHMuXG4gKiBUaGlzIHNlcnZpY2UgaW1wbGVtZW50cyB0aGUgcHJvZ3Jlc3Npb24gY3JpdGVyaWE6XG4gKiAtIENvbnN0YW5jeSAoc3RyZWFrIC8gZGFpbHkgYWN0aXZpdHkpXG4gKiAtIENvbnRyaWJ1dGlvbiAocG9zdHMsIGNvbW1lbnRzLCBwYXJ0aWNpcGF0aW9uKVxuICogLSBDb250ZW50IHF1YWxpdHkgKGF2ZXJhZ2UgZW5nYWdlbWVudCBwZXIgcG9zdClcbiAqIC0gSW1wYWN0IChsaWtlcyBmcm9tIGh1bWFucywgY29tbWVudHMgZnJvbSBodW1hbnMpXG4gKiAtIEludml0YXRpb25zIChzdWNjZXNzZnVsIGludml0ZXMpXG4gKi9cblxuaW1wb3J0IHsgSHVtYW5SYW5rLCBVc2VyU3RhdHMsIFJhbmtSZXN1bHQgfSBmcm9tICdAL3R5cGVzL2dhbWlmaWNhdGlvbic7XG5cbi8vIFJhbmsgdGhyZXNob2xkcyAtIHR1bmVkIGZvciBiYWxhbmNlZCBwcm9ncmVzc2lvblxuY29uc3QgUkFOS19USFJFU0hPTERTID0ge1xuICBIVU1BTl9WRVJJRklFRDogMCwgICAgICAgLy8gU3RhcnRpbmcgcmFua1xuICBIVU1BTl9FWFBMT1JFUjogMTAwLCAgICAgLy8gRWFzeSB0byByZWFjaCAtIGVuY291cmFnZXMgZWFybHkgZW5nYWdlbWVudFxuICBIVU1BTl9QSU9ORUVSOiA1MDAsICAgICAgLy8gTW9kZXJhdGUgZWZmb3J0IC0gY29uc2lzdGVudCBhY3Rpdml0eVxuICBIVU1BTl9FTElURTogMjAwMCwgICAgICAgLy8gU2lnbmlmaWNhbnQgYWNoaWV2ZW1lbnRcbiAgSFVNQU5fTEVHRU5EOiA1MDAwLCAgICAgIC8vIFJhcmUsIGhpZ2ggYWNoaWV2ZXJzXG4gIEhVTUFOX0lORklOSVRZOiAxMDAwMCwgICAvLyBPbmx5IHZpYSBjb21tdW5pdHkgdm90ZXMsIG5vdCBhdXRvLWFzc2lnbmVkXG59O1xuXG4vLyBTY29yaW5nIHdlaWdodHMgZm9yIGRpZmZlcmVudCBjcml0ZXJpYVxuY29uc3QgU0NPUklOR19XRUlHSFRTID0ge1xuICAvLyBDb25zdGFuY3k6IERhaWx5IGFjdGl2aXR5IGFuZCBzdHJlYWtzXG4gIHN0cmVha0RheXM6IDUsICAgICAgICAgICAvLyA1IHBvaW50cyBwZXIgZGF5IG9mIHN0cmVha1xuICBzdHJlYWtCb251czogMiwgICAgICAgICAgLy8gQm9udXMgbXVsdGlwbGllciBmb3IgbG9uZyBzdHJlYWtzICg+MzAgZGF5cylcbiAgXG4gIC8vIENvbnRyaWJ1dGlvbjogQ29udGVudCBjcmVhdGlvblxuICB0d2VldHM6IDEwLCAgICAgICAgICAgICAgLy8gMTAgcG9pbnRzIHBlciB0d2VldFxuICBjb21tZW50czogNSwgICAgICAgICAgICAgLy8gNSBwb2ludHMgcGVyIGNvbW1lbnRcbiAgXG4gIC8vIFF1YWxpdHk6IEVuZ2FnZW1lbnQgbWV0cmljc1xuICBhdmdFbmdhZ2VtZW50OiAyMCwgICAgICAgLy8gMjAgcG9pbnRzIHBlciBhdmcgZW5nYWdlbWVudCBwb2ludFxuICBcbiAgLy8gSW1wYWN0OiBIdW1hbi10by1odW1hbiBpbnRlcmFjdGlvbnNcbiAgbGlrZXNGcm9tSHVtYW5zOiAzLCAgICAgIC8vIDMgcG9pbnRzIHBlciBsaWtlIGZyb20gdmVyaWZpZWQgaHVtYW5cbiAgY29tbWVudHNGcm9tSHVtYW5zOiA4LCAgIC8vIDggcG9pbnRzIHBlciBjb21tZW50IGZyb20gdmVyaWZpZWQgaHVtYW5cbiAgXG4gIC8vIEludml0YXRpb25zOiBOZXR3b3JrIGdyb3d0aFxuICBpbnZpdGVzOiA1MCwgICAgICAgICAgICAgLy8gNTAgcG9pbnRzIHBlciBzdWNjZXNzZnVsIGludml0ZVxuICBcbiAgLy8gTG9uZ2V2aXR5OiBUaW1lIG9uIHBsYXRmb3JtXG4gIHZldGVyYW5Cb251czogMSwgICAgICAgICAvLyAxIHBvaW50IHBlciBkYXkgc2luY2Ugam9pblxufTtcblxuLyoqXG4gKiBDb21wdXRlIHRoZSByYW5rIGFuZCBzY29yZSBmb3IgYSB1c2VyIGJhc2VkIG9uIHRoZWlyIHN0YXRzXG4gKiBUaGlzIGlzIGEgcHVyZSBmdW5jdGlvbiAtIG5vIHNpZGUgZWZmZWN0cywgZWFzeSB0byB0ZXN0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlUmFua0ZvclVzZXIoc3RhdHM6IFVzZXJTdGF0cyk6IFJhbmtSZXN1bHQge1xuICAvLyBDYWxjdWxhdGUgYmFzZSBzY29yZSBmcm9tIGFsbCBjcml0ZXJpYVxuICBsZXQgc2NvcmUgPSAwO1xuICBcbiAgLy8gMS4gQ29uc3RhbmN5IHNjb3JlXG4gIHNjb3JlICs9IHN0YXRzLnN0cmVha0RheXMgKiBTQ09SSU5HX1dFSUdIVFMuc3RyZWFrRGF5cztcbiAgaWYgKHN0YXRzLnN0cmVha0RheXMgPj0gMzApIHtcbiAgICBzY29yZSArPSBzdGF0cy5zdHJlYWtEYXlzICogU0NPUklOR19XRUlHSFRTLnN0cmVha0JvbnVzOyAvLyBCb251cyBmb3IgbG9uZyBzdHJlYWtzXG4gIH1cbiAgXG4gIC8vIDIuIENvbnRyaWJ1dGlvbiBzY29yZVxuICBzY29yZSArPSBzdGF0cy50b3RhbFR3ZWV0cyAqIFNDT1JJTkdfV0VJR0hUUy50d2VldHM7XG4gIHNjb3JlICs9IHN0YXRzLnRvdGFsQ29tbWVudHMgKiBTQ09SSU5HX1dFSUdIVFMuY29tbWVudHM7XG4gIFxuICAvLyAzLiBRdWFsaXR5IHNjb3JlIChlbmdhZ2VtZW50KVxuICBzY29yZSArPSBzdGF0cy5hdmdFbmdhZ2VtZW50UGVyUG9zdCAqIFNDT1JJTkdfV0VJR0hUUy5hdmdFbmdhZ2VtZW50O1xuICBcbiAgLy8gNC4gSW1wYWN0IHNjb3JlIChodW1hbiBpbnRlcmFjdGlvbnMpXG4gIHNjb3JlICs9IHN0YXRzLmxpa2VzRnJvbVZlcmlmaWVkSHVtYW5zICogU0NPUklOR19XRUlHSFRTLmxpa2VzRnJvbUh1bWFucztcbiAgc2NvcmUgKz0gc3RhdHMuY29tbWVudHNGcm9tVmVyaWZpZWRIdW1hbnMgKiBTQ09SSU5HX1dFSUdIVFMuY29tbWVudHNGcm9tSHVtYW5zO1xuICBcbiAgLy8gNS4gTmV0d29yayBncm93dGggc2NvcmVcbiAgc2NvcmUgKz0gc3RhdHMuc3VjY2Vzc2Z1bEludml0ZXNDb3VudCAqIFNDT1JJTkdfV0VJR0hUUy5pbnZpdGVzO1xuICBcbiAgLy8gNi4gVmV0ZXJhbiBib251c1xuICBzY29yZSArPSBzdGF0cy5kYXlzU2luY2VKb2luICogU0NPUklOR19XRUlHSFRTLnZldGVyYW5Cb251cztcbiAgXG4gIC8vIFJvdW5kIHRvIG5lYXJlc3QgaW50ZWdlclxuICBjb25zdCByYW5rU2NvcmUgPSBNYXRoLnJvdW5kKHNjb3JlKTtcbiAgXG4gIC8vIERldGVybWluZSByYW5rIGJhc2VkIG9uIHNjb3JlIChleGNsdWRpbmcgSFVNQU5fSU5GSU5JVFkgd2hpY2ggaXMgdm90ZS1iYXNlZClcbiAgbGV0IGN1cnJlbnRSYW5rOiBIdW1hblJhbmsgPSAnSFVNQU5fVkVSSUZJRUQnO1xuICBsZXQgbmV4dFJhbms6IEh1bWFuUmFuayB8IG51bGwgPSAnSFVNQU5fRVhQTE9SRVInO1xuICBcbiAgaWYgKHJhbmtTY29yZSA+PSBSQU5LX1RIUkVTSE9MRFMuSFVNQU5fTEVHRU5EKSB7XG4gICAgY3VycmVudFJhbmsgPSAnSFVNQU5fTEVHRU5EJztcbiAgICBuZXh0UmFuayA9ICdIVU1BTl9JTkZJTklUWSc7XG4gIH0gZWxzZSBpZiAocmFua1Njb3JlID49IFJBTktfVEhSRVNIT0xEUy5IVU1BTl9FTElURSkge1xuICAgIGN1cnJlbnRSYW5rID0gJ0hVTUFOX0VMSVRFJztcbiAgICBuZXh0UmFuayA9ICdIVU1BTl9MRUdFTkQnO1xuICB9IGVsc2UgaWYgKHJhbmtTY29yZSA+PSBSQU5LX1RIUkVTSE9MRFMuSFVNQU5fUElPTkVFUikge1xuICAgIGN1cnJlbnRSYW5rID0gJ0hVTUFOX1BJT05FRVInO1xuICAgIG5leHRSYW5rID0gJ0hVTUFOX0VMSVRFJztcbiAgfSBlbHNlIGlmIChyYW5rU2NvcmUgPj0gUkFOS19USFJFU0hPTERTLkhVTUFOX0VYUExPUkVSKSB7XG4gICAgY3VycmVudFJhbmsgPSAnSFVNQU5fRVhQTE9SRVInO1xuICAgIG5leHRSYW5rID0gJ0hVTUFOX1BJT05FRVInO1xuICB9XG4gIFxuICAvLyBDYWxjdWxhdGUgcHJvZ3Jlc3MgdG8gbmV4dCByYW5rICgwLTEpXG4gIGxldCBwcm9ncmVzc1RvTmV4dCA9IDA7XG4gIGlmIChuZXh0UmFuayAmJiBuZXh0UmFuayAhPT0gJ0hVTUFOX0lORklOSVRZJykge1xuICAgIGNvbnN0IGN1cnJlbnRUaHJlc2hvbGQgPSBSQU5LX1RIUkVTSE9MRFNbY3VycmVudFJhbmtdO1xuICAgIGNvbnN0IG5leHRUaHJlc2hvbGQgPSBSQU5LX1RIUkVTSE9MRFNbbmV4dFJhbmtdO1xuICAgIHByb2dyZXNzVG9OZXh0ID0gTWF0aC5taW4oXG4gICAgICAocmFua1Njb3JlIC0gY3VycmVudFRocmVzaG9sZCkgLyAobmV4dFRocmVzaG9sZCAtIGN1cnJlbnRUaHJlc2hvbGQpLFxuICAgICAgMVxuICAgICk7XG4gIH1cbiAgXG4gIC8vIEJ1aWxkIHJlcXVpcmVtZW50cyBmZWVkYmFja1xuICBjb25zdCByZXF1aXJlbWVudHMgPSBhbmFseXplUmVxdWlyZW1lbnRzKHN0YXRzLCBjdXJyZW50UmFuaywgbmV4dFJhbmspO1xuICBcbiAgcmV0dXJuIHtcbiAgICByYW5rOiBjdXJyZW50UmFuayxcbiAgICByYW5rU2NvcmUsXG4gICAgcHJvZ3Jlc3NUb05leHQsXG4gICAgbmV4dFJhbmssXG4gICAgcmVxdWlyZW1lbnRzLFxuICB9O1xufVxuXG4vKipcbiAqIEFuYWx5emUgd2hpY2ggcmVxdWlyZW1lbnRzIGFyZSBtZXQgdnMgcGVuZGluZyBmb3IgcmFuayBwcm9ncmVzc2lvblxuICovXG5mdW5jdGlvbiBhbmFseXplUmVxdWlyZW1lbnRzKFxuICBzdGF0czogVXNlclN0YXRzLFxuICBjdXJyZW50UmFuazogSHVtYW5SYW5rLFxuICBuZXh0UmFuazogSHVtYW5SYW5rIHwgbnVsbFxuKTogeyBtZXQ6IHN0cmluZ1tdOyBwZW5kaW5nOiBzdHJpbmdbXSB9IHtcbiAgY29uc3QgbWV0OiBzdHJpbmdbXSA9IFtdO1xuICBjb25zdCBwZW5kaW5nOiBzdHJpbmdbXSA9IFtdO1xuICBcbiAgLy8gU3RyZWFrIHJlcXVpcmVtZW50c1xuICBpZiAoc3RhdHMuc3RyZWFrRGF5cyA+PSA3KSB7XG4gICAgbWV0LnB1c2goYDcrIGRheSBzdHJlYWsgKCR7c3RhdHMuc3RyZWFrRGF5c30gZGF5cylgKTtcbiAgfSBlbHNlIHtcbiAgICBwZW5kaW5nLnB1c2goYE1haW50YWluIGEgNy1kYXkgc3RyZWFrIChjdXJyZW50OiAke3N0YXRzLnN0cmVha0RheXN9IGRheXMpYCk7XG4gIH1cbiAgXG4gIC8vIENvbnRlbnQgcmVxdWlyZW1lbnRzXG4gIGlmIChzdGF0cy50b3RhbFR3ZWV0cyA+PSAxMCkge1xuICAgIG1ldC5wdXNoKGAxMCsgcG9zdHMgKCR7c3RhdHMudG90YWxUd2VldHN9IHBvc3RzKWApO1xuICB9IGVsc2Uge1xuICAgIHBlbmRpbmcucHVzaChgQ3JlYXRlIDEwKyBwb3N0cyAoY3VycmVudDogJHtzdGF0cy50b3RhbFR3ZWV0c30pYCk7XG4gIH1cbiAgXG4gIC8vIEVuZ2FnZW1lbnQgcmVxdWlyZW1lbnRzXG4gIGlmIChzdGF0cy5hdmdFbmdhZ2VtZW50UGVyUG9zdCA+PSAyKSB7XG4gICAgbWV0LnB1c2goYFF1YWxpdHkgY29udGVudCAoJHtzdGF0cy5hdmdFbmdhZ2VtZW50UGVyUG9zdC50b0ZpeGVkKDEpfSBhdmcgZW5nYWdlbWVudClgKTtcbiAgfSBlbHNlIHtcbiAgICBwZW5kaW5nLnB1c2goYEltcHJvdmUgZW5nYWdlbWVudCAoY3VycmVudDogJHtzdGF0cy5hdmdFbmdhZ2VtZW50UGVyUG9zdC50b0ZpeGVkKDEpfSBhdmcpYCk7XG4gIH1cbiAgXG4gIC8vIEh1bWFuIGludGVyYWN0aW9uIHJlcXVpcmVtZW50c1xuICBpZiAoc3RhdHMubGlrZXNGcm9tVmVyaWZpZWRIdW1hbnMgPj0gMTApIHtcbiAgICBtZXQucHVzaChgMTArIGxpa2VzIGZyb20gaHVtYW5zICgke3N0YXRzLmxpa2VzRnJvbVZlcmlmaWVkSHVtYW5zfSlgKTtcbiAgfSBlbHNlIHtcbiAgICBwZW5kaW5nLnB1c2goYEdldCAxMCsgbGlrZXMgZnJvbSB2ZXJpZmllZCBodW1hbnMgKGN1cnJlbnQ6ICR7c3RhdHMubGlrZXNGcm9tVmVyaWZpZWRIdW1hbnN9KWApO1xuICB9XG4gIFxuICAvLyBJbnZpdGF0aW9uIHJlcXVpcmVtZW50cyAoZm9yIGhpZ2hlciByYW5rcylcbiAgaWYgKGN1cnJlbnRSYW5rID09PSAnSFVNQU5fUElPTkVFUicgfHwgY3VycmVudFJhbmsgPT09ICdIVU1BTl9FTElURScgfHwgY3VycmVudFJhbmsgPT09ICdIVU1BTl9MRUdFTkQnKSB7XG4gICAgaWYgKHN0YXRzLnN1Y2Nlc3NmdWxJbnZpdGVzQ291bnQgPj0gMykge1xuICAgICAgbWV0LnB1c2goYEludml0ZWQgJHtzdGF0cy5zdWNjZXNzZnVsSW52aXRlc0NvdW50fSBodW1hbnNgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGVuZGluZy5wdXNoKGBJbnZpdGUgMysgaHVtYW5zIHRvIGpvaW4gKGN1cnJlbnQ6ICR7c3RhdHMuc3VjY2Vzc2Z1bEludml0ZXNDb3VudH0pYCk7XG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4geyBtZXQsIHBlbmRpbmcgfTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIHVzZXIgcXVhbGlmaWVzIGZvciBIdW1hbiBJbmZpbml0eSBiYXNlZCBvbiB2b3Rlc1xuICogUmVxdWlyZXM6IFxuICogLSBBbHJlYWR5IGF0IEhVTUFOX0xFR0VORCByYW5rXG4gKiAtIEF0IGxlYXN0IDEwIHZvdGVzIGZyb20gZGlmZmVyZW50IEhVTUFOX0xFR0VORCBvciBIVU1BTl9JTkZJTklUWSB1c2Vyc1xuICogLSBTY29yZSB0aHJlc2hvbGQgbWV0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBxdWFsaWZpZXNGb3JJbmZpbml0eShcbiAgY3VycmVudFJhbms6IEh1bWFuUmFuayxcbiAgcmFua1Njb3JlOiBudW1iZXIsXG4gIGluZmluaXR5Vm90ZXNDb3VudDogbnVtYmVyXG4pOiBib29sZWFuIHtcbiAgcmV0dXJuIChcbiAgICBjdXJyZW50UmFuayA9PT0gJ0hVTUFOX0xFR0VORCcgJiZcbiAgICByYW5rU2NvcmUgPj0gUkFOS19USFJFU0hPTERTLkhVTUFOX0lORklOSVRZICYmXG4gICAgaW5maW5pdHlWb3Rlc0NvdW50ID49IDEwXG4gICk7XG59XG5cbi8qKlxuICogR2V0IHJhbmsgZGlzcGxheSBuYW1lIGZvciBVSVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmFua0Rpc3BsYXlOYW1lKHJhbms6IEh1bWFuUmFuayk6IHN0cmluZyB7XG4gIGNvbnN0IG5hbWVzOiBSZWNvcmQ8SHVtYW5SYW5rLCBzdHJpbmc+ID0ge1xuICAgIEhVTUFOX1ZFUklGSUVEOiAnSHVtYW4gVmVyaWZpZWQnLFxuICAgIEhVTUFOX0VYUExPUkVSOiAnSHVtYW4gRXhwbG9yZXInLFxuICAgIEhVTUFOX1BJT05FRVI6ICdIdW1hbiBQaW9uZWVyJyxcbiAgICBIVU1BTl9FTElURTogJ0h1bWFuIEVsaXRlJyxcbiAgICBIVU1BTl9MRUdFTkQ6ICdIdW1hbiBMZWdlbmQnLFxuICAgIEhVTUFOX0lORklOSVRZOiAnSHVtYW4gSW5maW5pdHknLFxuICB9O1xuICByZXR1cm4gbmFtZXNbcmFua107XG59XG5cbi8qKlxuICogR2V0IHJhbmsgbGV2ZWwgKDAtNSkgZm9yIGNvbXBhcmlzb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJhbmtMZXZlbChyYW5rOiBIdW1hblJhbmspOiBudW1iZXIge1xuICBjb25zdCBsZXZlbHM6IFJlY29yZDxIdW1hblJhbmssIG51bWJlcj4gPSB7XG4gICAgSFVNQU5fVkVSSUZJRUQ6IDAsXG4gICAgSFVNQU5fRVhQTE9SRVI6IDEsXG4gICAgSFVNQU5fUElPTkVFUjogMixcbiAgICBIVU1BTl9FTElURTogMyxcbiAgICBIVU1BTl9MRUdFTkQ6IDQsXG4gICAgSFVNQU5fSU5GSU5JVFk6IDUsXG4gIH07XG4gIHJldHVybiBsZXZlbHNbcmFua107XG59XG5cbi8qKlxuICogR2V0IHJhbmsgY29sb3IgZm9yIFVJXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSYW5rQ29sb3IocmFuazogSHVtYW5SYW5rKTogc3RyaW5nIHtcbiAgY29uc3QgY29sb3JzOiBSZWNvcmQ8SHVtYW5SYW5rLCBzdHJpbmc+ID0ge1xuICAgIEhVTUFOX1ZFUklGSUVEOiAnIzAwRkZCRScsICAgICAgLy8gQnJhbmQgZ3JlZW5cbiAgICBIVU1BTl9FWFBMT1JFUjogJyMwMEQ5RkYnLCAgICAgIC8vIEN5YW5cbiAgICBIVU1BTl9QSU9ORUVSOiAnIzYzNjZGMScsICAgICAgIC8vIEluZGlnb1xuICAgIEhVTUFOX0VMSVRFOiAnI0E4NTVGNycsICAgICAgICAgLy8gUHVycGxlXG4gICAgSFVNQU5fTEVHRU5EOiAnI0Y1OUUwQicsICAgICAgICAvLyBBbWJlci9Hb2xkXG4gICAgSFVNQU5fSU5GSU5JVFk6ICcjRUM0ODk5JywgICAgICAvLyBQaW5rL01hZ2VudGEgKHVsdHJhIHJhcmUpXG4gIH07XG4gIHJldHVybiBjb2xvcnNbcmFua107XG59XG5cbi8qKlxuICogR2V0IHJhbmsgaWNvbi9lbW9qaSBmb3IgVUlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJhbmtJY29uKHJhbms6IEh1bWFuUmFuayk6IHN0cmluZyB7XG4gIGNvbnN0IGljb25zOiBSZWNvcmQ8SHVtYW5SYW5rLCBzdHJpbmc+ID0ge1xuICAgIEhVTUFOX1ZFUklGSUVEOiAn4pyTJyxcbiAgICBIVU1BTl9FWFBMT1JFUjogJ/CfjI0nLFxuICAgIEhVTUFOX1BJT05FRVI6ICfwn5qAJyxcbiAgICBIVU1BTl9FTElURTogJ/CfkZEnLFxuICAgIEhVTUFOX0xFR0VORDogJ+KtkCcsXG4gICAgSFVNQU5fSU5GSU5JVFk6ICfiiJ4nLFxuICB9O1xuICByZXR1cm4gaWNvbnNbcmFua107XG59XG4iXSwibmFtZXMiOlsiUkFOS19USFJFU0hPTERTIiwiSFVNQU5fVkVSSUZJRUQiLCJIVU1BTl9FWFBMT1JFUiIsIkhVTUFOX1BJT05FRVIiLCJIVU1BTl9FTElURSIsIkhVTUFOX0xFR0VORCIsIkhVTUFOX0lORklOSVRZIiwiU0NPUklOR19XRUlHSFRTIiwic3RyZWFrRGF5cyIsInN0cmVha0JvbnVzIiwidHdlZXRzIiwiY29tbWVudHMiLCJhdmdFbmdhZ2VtZW50IiwibGlrZXNGcm9tSHVtYW5zIiwiY29tbWVudHNGcm9tSHVtYW5zIiwiaW52aXRlcyIsInZldGVyYW5Cb251cyIsImNvbXB1dGVSYW5rRm9yVXNlciIsInN0YXRzIiwic2NvcmUiLCJ0b3RhbFR3ZWV0cyIsInRvdGFsQ29tbWVudHMiLCJhdmdFbmdhZ2VtZW50UGVyUG9zdCIsImxpa2VzRnJvbVZlcmlmaWVkSHVtYW5zIiwiY29tbWVudHNGcm9tVmVyaWZpZWRIdW1hbnMiLCJzdWNjZXNzZnVsSW52aXRlc0NvdW50IiwiZGF5c1NpbmNlSm9pbiIsInJhbmtTY29yZSIsIk1hdGgiLCJyb3VuZCIsImN1cnJlbnRSYW5rIiwibmV4dFJhbmsiLCJwcm9ncmVzc1RvTmV4dCIsImN1cnJlbnRUaHJlc2hvbGQiLCJuZXh0VGhyZXNob2xkIiwibWluIiwicmVxdWlyZW1lbnRzIiwiYW5hbHl6ZVJlcXVpcmVtZW50cyIsInJhbmsiLCJtZXQiLCJwZW5kaW5nIiwicHVzaCIsInRvRml4ZWQiLCJxdWFsaWZpZXNGb3JJbmZpbml0eSIsImluZmluaXR5Vm90ZXNDb3VudCIsImdldFJhbmtEaXNwbGF5TmFtZSIsIm5hbWVzIiwiZ2V0UmFua0xldmVsIiwibGV2ZWxzIiwiZ2V0UmFua0NvbG9yIiwiY29sb3JzIiwiZ2V0UmFua0ljb24iLCJpY29ucyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/gamification/rankService.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/gamification/statsService.ts":
/*!**********************************************!*\
  !*** ./src/lib/gamification/statsService.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   collectMultipleUserStats: () => (/* binding */ collectMultipleUserStats),\n/* harmony export */   collectUserStats: () => (/* binding */ collectUserStats),\n/* harmony export */   collectWeeklyUserStats: () => (/* binding */ collectWeeklyUserStats),\n/* harmony export */   updateUserStreak: () => (/* binding */ updateUserStreak)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/**\n * User Stats Service\n * \n * Collects and computes user statistics from the database.\n * Used by rank computation and leaderboard scoring.\n */ \n/**\n * Collect comprehensive stats for a user\n * This is used for rank computation and leaderboard scoring\n */ async function collectUserStats(userId) {\n    // Get user basic info\n    const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n        where: {\n            id: userId\n        },\n        select: {\n            streakDays: true,\n            lastActiveAt: true,\n            invitesCount: true,\n            successfulInvitesCount: true,\n            createdAt: true\n        }\n    });\n    if (!user) {\n        throw new Error(`User ${userId} not found`);\n    }\n    // Count tweets\n    const totalTweets = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.tweet.count({\n        where: {\n            authorId: userId\n        }\n    });\n    // Count comments\n    const totalComments = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.comment.count({\n        where: {\n            authorId: userId\n        }\n    });\n    // Count likes received\n    const totalLikes = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.like.count({\n        where: {\n            tweet: {\n                authorId: userId\n            }\n        }\n    });\n    // Count retweets received\n    const totalRetweets = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.retweet.count({\n        where: {\n            tweet: {\n                authorId: userId\n            }\n        }\n    });\n    // Count likes from verified humans (users with isVerified = true)\n    const likesFromVerifiedHumans = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.like.count({\n        where: {\n            tweet: {\n                authorId: userId\n            },\n            user: {\n                isVerified: true\n            }\n        }\n    });\n    // Count comments from verified humans\n    const commentsFromVerifiedHumans = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.comment.count({\n        where: {\n            tweet: {\n                authorId: userId\n            },\n            author: {\n                isVerified: true\n            }\n        }\n    });\n    // Calculate average engagement per post\n    const totalEngagement = totalLikes + totalRetweets + totalComments;\n    const avgEngagementPerPost = totalTweets > 0 ? totalEngagement / totalTweets : 0;\n    // Calculate days since join\n    const daysSinceJoin = Math.floor((Date.now() - user.createdAt.getTime()) / (1000 * 60 * 60 * 24));\n    // Get infinity votes count\n    const infinityVotesCount = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.humanInfinityVote.count({\n        where: {\n            candidateId: userId,\n            voter: {\n                OR: [\n                    {\n                        currentRank: \"HUMAN_LEGEND\"\n                    },\n                    {\n                        currentRank: \"HUMAN_INFINITY\"\n                    }\n                ]\n            }\n        }\n    });\n    return {\n        userId,\n        streakDays: user.streakDays,\n        lastActiveAt: user.lastActiveAt,\n        totalTweets,\n        totalComments,\n        totalLikes,\n        totalRetweets,\n        likesFromVerifiedHumans,\n        commentsFromVerifiedHumans,\n        avgEngagementPerPost,\n        invitesCount: user.invitesCount,\n        successfulInvitesCount: user.successfulInvitesCount,\n        daysSinceJoin,\n        infinityVotesCount\n    };\n}\n/**\n * Collect stats for multiple users efficiently\n * Used for batch rank updates and leaderboard generation\n */ async function collectMultipleUserStats(userIds) {\n    const statsMap = new Map();\n    // Use Promise.all for parallel fetching\n    await Promise.all(userIds.map(async (userId)=>{\n        try {\n            const stats = await collectUserStats(userId);\n            statsMap.set(userId, stats);\n        } catch (error) {\n            console.error(`Failed to collect stats for user ${userId}:`, error);\n        }\n    }));\n    return statsMap;\n}\n/**\n * Collect weekly stats for a user (for weekly leaderboards)\n * Only counts activity from the last 7 days\n */ async function collectWeeklyUserStats(userId, weekStart, weekEnd) {\n    const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n        where: {\n            id: userId\n        },\n        select: {\n            streakDays: true,\n            lastActiveAt: true,\n            invitesCount: true,\n            successfulInvitesCount: true,\n            createdAt: true\n        }\n    });\n    if (!user) {\n        throw new Error(`User ${userId} not found`);\n    }\n    // Count tweets in the week\n    const totalTweets = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.tweet.count({\n        where: {\n            authorId: userId,\n            createdAt: {\n                gte: weekStart,\n                lte: weekEnd\n            }\n        }\n    });\n    // Count comments in the week\n    const totalComments = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.comment.count({\n        where: {\n            authorId: userId,\n            createdAt: {\n                gte: weekStart,\n                lte: weekEnd\n            }\n        }\n    });\n    // Count likes received in the week\n    const totalLikes = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.like.count({\n        where: {\n            tweet: {\n                authorId: userId\n            },\n            createdAt: {\n                gte: weekStart,\n                lte: weekEnd\n            }\n        }\n    });\n    // Count retweets received in the week\n    const totalRetweets = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.retweet.count({\n        where: {\n            tweet: {\n                authorId: userId\n            },\n            createdAt: {\n                gte: weekStart,\n                lte: weekEnd\n            }\n        }\n    });\n    // Likes from verified humans in the week\n    const likesFromVerifiedHumans = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.like.count({\n        where: {\n            tweet: {\n                authorId: userId\n            },\n            user: {\n                isVerified: true\n            },\n            createdAt: {\n                gte: weekStart,\n                lte: weekEnd\n            }\n        }\n    });\n    // Comments from verified humans in the week\n    const commentsFromVerifiedHumans = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.comment.count({\n        where: {\n            tweet: {\n                authorId: userId\n            },\n            author: {\n                isVerified: true\n            },\n            createdAt: {\n                gte: weekStart,\n                lte: weekEnd\n            }\n        }\n    });\n    const totalEngagement = totalLikes + totalRetweets + totalComments;\n    const avgEngagementPerPost = totalTweets > 0 ? totalEngagement / totalTweets : 0;\n    const daysSinceJoin = Math.floor((Date.now() - user.createdAt.getTime()) / (1000 * 60 * 60 * 24));\n    return {\n        userId,\n        streakDays: user.streakDays,\n        lastActiveAt: user.lastActiveAt,\n        totalTweets,\n        totalComments,\n        totalLikes,\n        totalRetweets,\n        likesFromVerifiedHumans,\n        commentsFromVerifiedHumans,\n        avgEngagementPerPost,\n        invitesCount: user.invitesCount,\n        successfulInvitesCount: user.successfulInvitesCount,\n        daysSinceJoin\n    };\n}\n/**\n * Update user streak based on last activity\n * Call this when user performs any action\n */ async function updateUserStreak(userId) {\n    const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n        where: {\n            id: userId\n        },\n        select: {\n            lastActiveAt: true,\n            streakDays: true\n        }\n    });\n    if (!user) return;\n    const now = new Date();\n    const lastActive = user.lastActiveAt;\n    let newStreakDays = user.streakDays;\n    if (!lastActive) {\n        // First activity\n        newStreakDays = 1;\n    } else {\n        const daysSinceLastActive = Math.floor((now.getTime() - lastActive.getTime()) / (1000 * 60 * 60 * 24));\n        if (daysSinceLastActive === 0) {\n            // Same day, no change\n            return;\n        } else if (daysSinceLastActive === 1) {\n            // Consecutive day, increment streak\n            newStreakDays = user.streakDays + 1;\n        } else {\n            // Streak broken, reset to 1\n            newStreakDays = 1;\n        }\n    }\n    await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.update({\n        where: {\n            id: userId\n        },\n        data: {\n            lastActiveAt: now,\n            streakDays: newStreakDays\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2dhbWlmaWNhdGlvbi9zdGF0c1NlcnZpY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7Ozs7Q0FLQyxHQUVxQztBQUd0Qzs7O0NBR0MsR0FDTSxlQUFlQyxpQkFBaUJDLE1BQWM7SUFDbkQsc0JBQXNCO0lBQ3RCLE1BQU1DLE9BQU8sTUFBTUgsK0NBQU1BLENBQUNHLElBQUksQ0FBQ0MsVUFBVSxDQUFDO1FBQ3hDQyxPQUFPO1lBQUVDLElBQUlKO1FBQU87UUFDcEJLLFFBQVE7WUFDTkMsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLGNBQWM7WUFDZEMsd0JBQXdCO1lBQ3hCQyxXQUFXO1FBQ2I7SUFDRjtJQUVBLElBQUksQ0FBQ1QsTUFBTTtRQUNULE1BQU0sSUFBSVUsTUFBTSxDQUFDLEtBQUssRUFBRVgsT0FBTyxVQUFVLENBQUM7SUFDNUM7SUFFQSxlQUFlO0lBQ2YsTUFBTVksY0FBYyxNQUFNZCwrQ0FBTUEsQ0FBQ2UsS0FBSyxDQUFDQyxLQUFLLENBQUM7UUFDM0NYLE9BQU87WUFBRVksVUFBVWY7UUFBTztJQUM1QjtJQUVBLGlCQUFpQjtJQUNqQixNQUFNZ0IsZ0JBQWdCLE1BQU1sQiwrQ0FBTUEsQ0FBQ21CLE9BQU8sQ0FBQ0gsS0FBSyxDQUFDO1FBQy9DWCxPQUFPO1lBQUVZLFVBQVVmO1FBQU87SUFDNUI7SUFFQSx1QkFBdUI7SUFDdkIsTUFBTWtCLGFBQWEsTUFBTXBCLCtDQUFNQSxDQUFDcUIsSUFBSSxDQUFDTCxLQUFLLENBQUM7UUFDekNYLE9BQU87WUFDTFUsT0FBTztnQkFDTEUsVUFBVWY7WUFDWjtRQUNGO0lBQ0Y7SUFFQSwwQkFBMEI7SUFDMUIsTUFBTW9CLGdCQUFnQixNQUFNdEIsK0NBQU1BLENBQUN1QixPQUFPLENBQUNQLEtBQUssQ0FBQztRQUMvQ1gsT0FBTztZQUNMVSxPQUFPO2dCQUNMRSxVQUFVZjtZQUNaO1FBQ0Y7SUFDRjtJQUVBLGtFQUFrRTtJQUNsRSxNQUFNc0IsMEJBQTBCLE1BQU14Qiwr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WW9EO1FBQ2Q7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8veC13b3JsZC1taW5pLWFwcC8uL3NyYy9saWIvZ2FtaWZpY2F0aW9uL3N0YXRzU2VydmljZS50cz85OTVhIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVXNlciBTdGF0cyBTZXJ2aWNlXG4gKiBcbiAqIENvbGxlY3RzIGFuZCBjb21wdXRlcyB1c2VyIHN0YXRpc3RpY3MgZnJvbSB0aGUgZGF0YWJhc2UuXG4gKiBVc2VkIGJ5IHJhbmsgY29tcHV0YXRpb24gYW5kIGxlYWRlcmJvYXJkIHNjb3JpbmcuXG4gKi9cblxuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSAnQC9saWIvcHJpc21hJztcbmltcG9ydCB7IFVzZXJTdGF0cyB9IGZyb20gJ0AvdHlwZXMvZ2FtaWZpY2F0aW9uJztcblxuLyoqXG4gKiBDb2xsZWN0IGNvbXByZWhlbnNpdmUgc3RhdHMgZm9yIGEgdXNlclxuICogVGhpcyBpcyB1c2VkIGZvciByYW5rIGNvbXB1dGF0aW9uIGFuZCBsZWFkZXJib2FyZCBzY29yaW5nXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb2xsZWN0VXNlclN0YXRzKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxVc2VyU3RhdHM+IHtcbiAgLy8gR2V0IHVzZXIgYmFzaWMgaW5mb1xuICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9LFxuICAgIHNlbGVjdDoge1xuICAgICAgc3RyZWFrRGF5czogdHJ1ZSxcbiAgICAgIGxhc3RBY3RpdmVBdDogdHJ1ZSxcbiAgICAgIGludml0ZXNDb3VudDogdHJ1ZSxcbiAgICAgIHN1Y2Nlc3NmdWxJbnZpdGVzQ291bnQ6IHRydWUsXG4gICAgICBjcmVhdGVkQXQ6IHRydWUsXG4gICAgfSxcbiAgfSk7XG5cbiAgaWYgKCF1c2VyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBVc2VyICR7dXNlcklkfSBub3QgZm91bmRgKTtcbiAgfVxuXG4gIC8vIENvdW50IHR3ZWV0c1xuICBjb25zdCB0b3RhbFR3ZWV0cyA9IGF3YWl0IHByaXNtYS50d2VldC5jb3VudCh7XG4gICAgd2hlcmU6IHsgYXV0aG9ySWQ6IHVzZXJJZCB9LFxuICB9KTtcblxuICAvLyBDb3VudCBjb21tZW50c1xuICBjb25zdCB0b3RhbENvbW1lbnRzID0gYXdhaXQgcHJpc21hLmNvbW1lbnQuY291bnQoe1xuICAgIHdoZXJlOiB7IGF1dGhvcklkOiB1c2VySWQgfSxcbiAgfSk7XG5cbiAgLy8gQ291bnQgbGlrZXMgcmVjZWl2ZWRcbiAgY29uc3QgdG90YWxMaWtlcyA9IGF3YWl0IHByaXNtYS5saWtlLmNvdW50KHtcbiAgICB3aGVyZToge1xuICAgICAgdHdlZXQ6IHtcbiAgICAgICAgYXV0aG9ySWQ6IHVzZXJJZCxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSk7XG5cbiAgLy8gQ291bnQgcmV0d2VldHMgcmVjZWl2ZWRcbiAgY29uc3QgdG90YWxSZXR3ZWV0cyA9IGF3YWl0IHByaXNtYS5yZXR3ZWV0LmNvdW50KHtcbiAgICB3aGVyZToge1xuICAgICAgdHdlZXQ6IHtcbiAgICAgICAgYXV0aG9ySWQ6IHVzZXJJZCxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSk7XG5cbiAgLy8gQ291bnQgbGlrZXMgZnJvbSB2ZXJpZmllZCBodW1hbnMgKHVzZXJzIHdpdGggaXNWZXJpZmllZCA9IHRydWUpXG4gIGNvbnN0IGxpa2VzRnJvbVZlcmlmaWVkSHVtYW5zID0gYXdhaXQgcHJpc21hLmxpa2UuY291bnQoe1xuICAgIHdoZXJlOiB7XG4gICAgICB0d2VldDoge1xuICAgICAgICBhdXRob3JJZDogdXNlcklkLFxuICAgICAgfSxcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgaXNWZXJpZmllZDogdHJ1ZSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSk7XG5cbiAgLy8gQ291bnQgY29tbWVudHMgZnJvbSB2ZXJpZmllZCBodW1hbnNcbiAgY29uc3QgY29tbWVudHNGcm9tVmVyaWZpZWRIdW1hbnMgPSBhd2FpdCBwcmlzbWEuY29tbWVudC5jb3VudCh7XG4gICAgd2hlcmU6IHtcbiAgICAgIHR3ZWV0OiB7XG4gICAgICAgIGF1dGhvcklkOiB1c2VySWQsXG4gICAgICB9LFxuICAgICAgYXV0aG9yOiB7XG4gICAgICAgIGlzVmVyaWZpZWQ6IHRydWUsXG4gICAgICB9LFxuICAgIH0sXG4gIH0pO1xuXG4gIC8vIENhbGN1bGF0ZSBhdmVyYWdlIGVuZ2FnZW1lbnQgcGVyIHBvc3RcbiAgY29uc3QgdG90YWxFbmdhZ2VtZW50ID0gdG90YWxMaWtlcyArIHRvdGFsUmV0d2VldHMgKyB0b3RhbENvbW1lbnRzO1xuICBjb25zdCBhdmdFbmdhZ2VtZW50UGVyUG9zdCA9IHRvdGFsVHdlZXRzID4gMCA/IHRvdGFsRW5nYWdlbWVudCAvIHRvdGFsVHdlZXRzIDogMDtcblxuICAvLyBDYWxjdWxhdGUgZGF5cyBzaW5jZSBqb2luXG4gIGNvbnN0IGRheXNTaW5jZUpvaW4gPSBNYXRoLmZsb29yKFxuICAgIChEYXRlLm5vdygpIC0gdXNlci5jcmVhdGVkQXQuZ2V0VGltZSgpKSAvICgxMDAwICogNjAgKiA2MCAqIDI0KVxuICApO1xuXG4gIC8vIEdldCBpbmZpbml0eSB2b3RlcyBjb3VudFxuICBjb25zdCBpbmZpbml0eVZvdGVzQ291bnQgPSBhd2FpdCBwcmlzbWEuaHVtYW5JbmZpbml0eVZvdGUuY291bnQoe1xuICAgIHdoZXJlOiB7XG4gICAgICBjYW5kaWRhdGVJZDogdXNlcklkLFxuICAgICAgdm90ZXI6IHtcbiAgICAgICAgT1I6IFtcbiAgICAgICAgICB7IGN1cnJlbnRSYW5rOiAnSFVNQU5fTEVHRU5EJyB9LFxuICAgICAgICAgIHsgY3VycmVudFJhbms6ICdIVU1BTl9JTkZJTklUWScgfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICB1c2VySWQsXG4gICAgc3RyZWFrRGF5czogdXNlci5zdHJlYWtEYXlzLFxuICAgIGxhc3RBY3RpdmVBdDogdXNlci5sYXN0QWN0aXZlQXQsXG4gICAgdG90YWxUd2VldHMsXG4gICAgdG90YWxDb21tZW50cyxcbiAgICB0b3RhbExpa2VzLFxuICAgIHRvdGFsUmV0d2VldHMsXG4gICAgbGlrZXNGcm9tVmVyaWZpZWRIdW1hbnMsXG4gICAgY29tbWVudHNGcm9tVmVyaWZpZWRIdW1hbnMsXG4gICAgYXZnRW5nYWdlbWVudFBlclBvc3QsXG4gICAgaW52aXRlc0NvdW50OiB1c2VyLmludml0ZXNDb3VudCxcbiAgICBzdWNjZXNzZnVsSW52aXRlc0NvdW50OiB1c2VyLnN1Y2Nlc3NmdWxJbnZpdGVzQ291bnQsXG4gICAgZGF5c1NpbmNlSm9pbixcbiAgICBpbmZpbml0eVZvdGVzQ291bnQsXG4gIH07XG59XG5cbi8qKlxuICogQ29sbGVjdCBzdGF0cyBmb3IgbXVsdGlwbGUgdXNlcnMgZWZmaWNpZW50bHlcbiAqIFVzZWQgZm9yIGJhdGNoIHJhbmsgdXBkYXRlcyBhbmQgbGVhZGVyYm9hcmQgZ2VuZXJhdGlvblxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29sbGVjdE11bHRpcGxlVXNlclN0YXRzKFxuICB1c2VySWRzOiBzdHJpbmdbXVxuKTogUHJvbWlzZTxNYXA8c3RyaW5nLCBVc2VyU3RhdHM+PiB7XG4gIGNvbnN0IHN0YXRzTWFwID0gbmV3IE1hcDxzdHJpbmcsIFVzZXJTdGF0cz4oKTtcblxuICAvLyBVc2UgUHJvbWlzZS5hbGwgZm9yIHBhcmFsbGVsIGZldGNoaW5nXG4gIGF3YWl0IFByb21pc2UuYWxsKFxuICAgIHVzZXJJZHMubWFwKGFzeW5jICh1c2VySWQpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHN0YXRzID0gYXdhaXQgY29sbGVjdFVzZXJTdGF0cyh1c2VySWQpO1xuICAgICAgICBzdGF0c01hcC5zZXQodXNlcklkLCBzdGF0cyk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gY29sbGVjdCBzdGF0cyBmb3IgdXNlciAke3VzZXJJZH06YCwgZXJyb3IpO1xuICAgICAgfVxuICAgIH0pXG4gICk7XG5cbiAgcmV0dXJuIHN0YXRzTWFwO1xufVxuXG4vKipcbiAqIENvbGxlY3Qgd2Vla2x5IHN0YXRzIGZvciBhIHVzZXIgKGZvciB3ZWVrbHkgbGVhZGVyYm9hcmRzKVxuICogT25seSBjb3VudHMgYWN0aXZpdHkgZnJvbSB0aGUgbGFzdCA3IGRheXNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbGxlY3RXZWVrbHlVc2VyU3RhdHMoXG4gIHVzZXJJZDogc3RyaW5nLFxuICB3ZWVrU3RhcnQ6IERhdGUsXG4gIHdlZWtFbmQ6IERhdGVcbik6IFByb21pc2U8VXNlclN0YXRzPiB7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICB3aGVyZTogeyBpZDogdXNlcklkIH0sXG4gICAgc2VsZWN0OiB7XG4gICAgICBzdHJlYWtEYXlzOiB0cnVlLFxuICAgICAgbGFzdEFjdGl2ZUF0OiB0cnVlLFxuICAgICAgaW52aXRlc0NvdW50OiB0cnVlLFxuICAgICAgc3VjY2Vzc2Z1bEludml0ZXNDb3VudDogdHJ1ZSxcbiAgICAgIGNyZWF0ZWRBdDogdHJ1ZSxcbiAgICB9LFxuICB9KTtcblxuICBpZiAoIXVzZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVzZXIgJHt1c2VySWR9IG5vdCBmb3VuZGApO1xuICB9XG5cbiAgLy8gQ291bnQgdHdlZXRzIGluIHRoZSB3ZWVrXG4gIGNvbnN0IHRvdGFsVHdlZXRzID0gYXdhaXQgcHJpc21hLnR3ZWV0LmNvdW50KHtcbiAgICB3aGVyZToge1xuICAgICAgYXV0aG9ySWQ6IHVzZXJJZCxcbiAgICAgIGNyZWF0ZWRBdDoge1xuICAgICAgICBndGU6IHdlZWtTdGFydCxcbiAgICAgICAgbHRlOiB3ZWVrRW5kLFxuICAgICAgfSxcbiAgICB9LFxuICB9KTtcblxuICAvLyBDb3VudCBjb21tZW50cyBpbiB0aGUgd2Vla1xuICBjb25zdCB0b3RhbENvbW1lbnRzID0gYXdhaXQgcHJpc21hLmNvbW1lbnQuY291bnQoe1xuICAgIHdoZXJlOiB7XG4gICAgICBhdXRob3JJZDogdXNlcklkLFxuICAgICAgY3JlYXRlZEF0OiB7XG4gICAgICAgIGd0ZTogd2Vla1N0YXJ0LFxuICAgICAgICBsdGU6IHdlZWtFbmQsXG4gICAgICB9LFxuICAgIH0sXG4gIH0pO1xuXG4gIC8vIENvdW50IGxpa2VzIHJlY2VpdmVkIGluIHRoZSB3ZWVrXG4gIGNvbnN0IHRvdGFsTGlrZXMgPSBhd2FpdCBwcmlzbWEubGlrZS5jb3VudCh7XG4gICAgd2hlcmU6IHtcbiAgICAgIHR3ZWV0OiB7XG4gICAgICAgIGF1dGhvcklkOiB1c2VySWQsXG4gICAgICB9LFxuICAgICAgY3JlYXRlZEF0OiB7XG4gICAgICAgIGd0ZTogd2Vla1N0YXJ0LFxuICAgICAgICBsdGU6IHdlZWtFbmQsXG4gICAgICB9LFxuICAgIH0sXG4gIH0pO1xuXG4gIC8vIENvdW50IHJldHdlZXRzIHJlY2VpdmVkIGluIHRoZSB3ZWVrXG4gIGNvbnN0IHRvdGFsUmV0d2VldHMgPSBhd2FpdCBwcmlzbWEucmV0d2VldC5jb3VudCh7XG4gICAgd2hlcmU6IHtcbiAgICAgIHR3ZWV0OiB7XG4gICAgICAgIGF1dGhvcklkOiB1c2VySWQsXG4gICAgICB9LFxuICAgICAgY3JlYXRlZEF0OiB7XG4gICAgICAgIGd0ZTogd2Vla1N0YXJ0LFxuICAgICAgICBsdGU6IHdlZWtFbmQsXG4gICAgICB9LFxuICAgIH0sXG4gIH0pO1xuXG4gIC8vIExpa2VzIGZyb20gdmVyaWZpZWQgaHVtYW5zIGluIHRoZSB3ZWVrXG4gIGNvbnN0IGxpa2VzRnJvbVZlcmlmaWVkSHVtYW5zID0gYXdhaXQgcHJpc21hLmxpa2UuY291bnQoe1xuICAgIHdoZXJlOiB7XG4gICAgICB0d2VldDoge1xuICAgICAgICBhdXRob3JJZDogdXNlcklkLFxuICAgICAgfSxcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgaXNWZXJpZmllZDogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICBjcmVhdGVkQXQ6IHtcbiAgICAgICAgZ3RlOiB3ZWVrU3RhcnQsXG4gICAgICAgIGx0ZTogd2Vla0VuZCxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSk7XG5cbiAgLy8gQ29tbWVudHMgZnJvbSB2ZXJpZmllZCBodW1hbnMgaW4gdGhlIHdlZWtcbiAgY29uc3QgY29tbWVudHNGcm9tVmVyaWZpZWRIdW1hbnMgPSBhd2FpdCBwcmlzbWEuY29tbWVudC5jb3VudCh7XG4gICAgd2hlcmU6IHtcbiAgICAgIHR3ZWV0OiB7XG4gICAgICAgIGF1dGhvcklkOiB1c2VySWQsXG4gICAgICB9LFxuICAgICAgYXV0aG9yOiB7XG4gICAgICAgIGlzVmVyaWZpZWQ6IHRydWUsXG4gICAgICB9LFxuICAgICAgY3JlYXRlZEF0OiB7XG4gICAgICAgIGd0ZTogd2Vla1N0YXJ0LFxuICAgICAgICBsdGU6IHdlZWtFbmQsXG4gICAgICB9LFxuICAgIH0sXG4gIH0pO1xuXG4gIGNvbnN0IHRvdGFsRW5nYWdlbWVudCA9IHRvdGFsTGlrZXMgKyB0b3RhbFJldHdlZXRzICsgdG90YWxDb21tZW50cztcbiAgY29uc3QgYXZnRW5nYWdlbWVudFBlclBvc3QgPSB0b3RhbFR3ZWV0cyA+IDAgPyB0b3RhbEVuZ2FnZW1lbnQgLyB0b3RhbFR3ZWV0cyA6IDA7XG5cbiAgY29uc3QgZGF5c1NpbmNlSm9pbiA9IE1hdGguZmxvb3IoXG4gICAgKERhdGUubm93KCkgLSB1c2VyLmNyZWF0ZWRBdC5nZXRUaW1lKCkpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpXG4gICk7XG5cbiAgcmV0dXJuIHtcbiAgICB1c2VySWQsXG4gICAgc3RyZWFrRGF5czogdXNlci5zdHJlYWtEYXlzLFxuICAgIGxhc3RBY3RpdmVBdDogdXNlci5sYXN0QWN0aXZlQXQsXG4gICAgdG90YWxUd2VldHMsXG4gICAgdG90YWxDb21tZW50cyxcbiAgICB0b3RhbExpa2VzLFxuICAgIHRvdGFsUmV0d2VldHMsXG4gICAgbGlrZXNGcm9tVmVyaWZpZWRIdW1hbnMsXG4gICAgY29tbWVudHNGcm9tVmVyaWZpZWRIdW1hbnMsXG4gICAgYXZnRW5nYWdlbWVudFBlclBvc3QsXG4gICAgaW52aXRlc0NvdW50OiB1c2VyLmludml0ZXNDb3VudCxcbiAgICBzdWNjZXNzZnVsSW52aXRlc0NvdW50OiB1c2VyLnN1Y2Nlc3NmdWxJbnZpdGVzQ291bnQsXG4gICAgZGF5c1NpbmNlSm9pbixcbiAgfTtcbn1cblxuLyoqXG4gKiBVcGRhdGUgdXNlciBzdHJlYWsgYmFzZWQgb24gbGFzdCBhY3Rpdml0eVxuICogQ2FsbCB0aGlzIHdoZW4gdXNlciBwZXJmb3JtcyBhbnkgYWN0aW9uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVVc2VyU3RyZWFrKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICB3aGVyZTogeyBpZDogdXNlcklkIH0sXG4gICAgc2VsZWN0OiB7XG4gICAgICBsYXN0QWN0aXZlQXQ6IHRydWUsXG4gICAgICBzdHJlYWtEYXlzOiB0cnVlLFxuICAgIH0sXG4gIH0pO1xuXG4gIGlmICghdXNlcikgcmV0dXJuO1xuXG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gIGNvbnN0IGxhc3RBY3RpdmUgPSB1c2VyLmxhc3RBY3RpdmVBdDtcblxuICBsZXQgbmV3U3RyZWFrRGF5cyA9IHVzZXIuc3RyZWFrRGF5cztcblxuICBpZiAoIWxhc3RBY3RpdmUpIHtcbiAgICAvLyBGaXJzdCBhY3Rpdml0eVxuICAgIG5ld1N0cmVha0RheXMgPSAxO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGRheXNTaW5jZUxhc3RBY3RpdmUgPSBNYXRoLmZsb29yKFxuICAgICAgKG5vdy5nZXRUaW1lKCkgLSBsYXN0QWN0aXZlLmdldFRpbWUoKSkgLyAoMTAwMCAqIDYwICogNjAgKiAyNClcbiAgICApO1xuXG4gICAgaWYgKGRheXNTaW5jZUxhc3RBY3RpdmUgPT09IDApIHtcbiAgICAgIC8vIFNhbWUgZGF5LCBubyBjaGFuZ2VcbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2UgaWYgKGRheXNTaW5jZUxhc3RBY3RpdmUgPT09IDEpIHtcbiAgICAgIC8vIENvbnNlY3V0aXZlIGRheSwgaW5jcmVtZW50IHN0cmVha1xuICAgICAgbmV3U3RyZWFrRGF5cyA9IHVzZXIuc3RyZWFrRGF5cyArIDE7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFN0cmVhayBicm9rZW4sIHJlc2V0IHRvIDFcbiAgICAgIG5ld1N0cmVha0RheXMgPSAxO1xuICAgIH1cbiAgfVxuXG4gIGF3YWl0IHByaXNtYS51c2VyLnVwZGF0ZSh7XG4gICAgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9LFxuICAgIGRhdGE6IHtcbiAgICAgIGxhc3RBY3RpdmVBdDogbm93LFxuICAgICAgc3RyZWFrRGF5czogbmV3U3RyZWFrRGF5cyxcbiAgICB9LFxuICB9KTtcbn1cbiJdLCJuYW1lcyI6WyJwcmlzbWEiLCJjb2xsZWN0VXNlclN0YXRzIiwidXNlcklkIiwidXNlciIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImlkIiwic2VsZWN0Iiwic3RyZWFrRGF5cyIsImxhc3RBY3RpdmVBdCIsImludml0ZXNDb3VudCIsInN1Y2Nlc3NmdWxJbnZpdGVzQ291bnQiLCJjcmVhdGVkQXQiLCJFcnJvciIsInRvdGFsVHdlZXRzIiwidHdlZXQiLCJjb3VudCIsImF1dGhvcklkIiwidG90YWxDb21tZW50cyIsImNvbW1lbnQiLCJ0b3RhbExpa2VzIiwibGlrZSIsInRvdGFsUmV0d2VldHMiLCJyZXR3ZWV0IiwibGlrZXNGcm9tVmVyaWZpZWRIdW1hbnMiLCJpc1ZlcmlmaWVkIiwiY29tbWVudHNGcm9tVmVyaWZpZWRIdW1hbnMiLCJhdXRob3IiLCJ0b3RhbEVuZ2FnZW1lbnQiLCJhdmdFbmdhZ2VtZW50UGVyUG9zdCIsImRheXNTaW5jZUpvaW4iLCJNYXRoIiwiZmxvb3IiLCJEYXRlIiwibm93IiwiZ2V0VGltZSIsImluZmluaXR5Vm90ZXNDb3VudCIsImh1bWFuSW5maW5pdHlWb3RlIiwiY2FuZGlkYXRlSWQiLCJ2b3RlciIsIk9SIiwiY3VycmVudFJhbmsiLCJjb2xsZWN0TXVsdGlwbGVVc2VyU3RhdHMiLCJ1c2VySWRzIiwic3RhdHNNYXAiLCJNYXAiLCJQcm9taXNlIiwiYWxsIiwibWFwIiwic3RhdHMiLCJzZXQiLCJlcnJvciIsImNvbnNvbGUiLCJjb2xsZWN0V2Vla2x5VXNlclN0YXRzIiwid2Vla1N0YXJ0Iiwid2Vla0VuZCIsImd0ZSIsImx0ZSIsInVwZGF0ZVVzZXJTdHJlYWsiLCJsYXN0QWN0aXZlIiwibmV3U3RyZWFrRGF5cyIsImRheXNTaW5jZUxhc3RBY3RpdmUiLCJ1cGRhdGUiLCJkYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/gamification/statsService.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNkM7QUFFN0MsTUFBTUMsa0JBQWtCQztBQUlqQixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSCx3REFBWUEsR0FBRTtBQUVsRSxJQUFJSSxJQUF5QixFQUFjSCxnQkFBZ0JFLE1BQU0sR0FBR0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly94LXdvcmxkLW1pbmktYXBwLy4vc3JjL2xpYi9wcmlzbWEudHM/MDFkNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCdcblxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsVGhpcyBhcyB1bmtub3duIGFzIHtcbiAgcHJpc21hOiBQcmlzbWFDbGllbnQgfCB1bmRlZmluZWRcbn1cblxuZXhwb3J0IGNvbnN0IHByaXNtYSA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPz8gbmV3IFByaXNtYUNsaWVudCgpXG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID0gcHJpc21hXG4iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsVGhpcyIsInByaXNtYSIsInByb2Nlc3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgamification%2Fuser%2F%5BuserId%5D%2Froute&page=%2Fapi%2Fgamification%2Fuser%2F%5BuserId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgamification%2Fuser%2F%5BuserId%5D%2Froute.ts&appDir=%2FUsers%2Fethan%2FDesktop%2FH%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fethan%2FDesktop%2FH&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();