"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/tweets/route";
exports.ids = ["app/api/tweets/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftweets%2Froute&page=%2Fapi%2Ftweets%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftweets%2Froute.ts&appDir=%2FUsers%2Fethan%2FDesktop%2FH%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fethan%2FDesktop%2FH&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftweets%2Froute&page=%2Fapi%2Ftweets%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftweets%2Froute.ts&appDir=%2FUsers%2Fethan%2FDesktop%2FH%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fethan%2FDesktop%2FH&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_ethan_Desktop_H_src_app_api_tweets_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/tweets/route.ts */ \"(rsc)/./src/app/api/tweets/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/tweets/route\",\n        pathname: \"/api/tweets\",\n        filename: \"route\",\n        bundlePath: \"app/api/tweets/route\"\n    },\n    resolvedPagePath: \"/Users/ethan/Desktop/H/src/app/api/tweets/route.ts\",\n    nextConfigOutput,\n    userland: _Users_ethan_Desktop_H_src_app_api_tweets_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/tweets/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ0d2VldHMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnR3ZWV0cyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnR3ZWV0cyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmV0aGFuJTJGRGVza3RvcCUyRkglMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGZXRoYW4lMkZEZXNrdG9wJTJGSCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDRTtBQUMvRTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3gtd29ybGQtbWluaS1hcHAvPzVlM2YiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2V0aGFuL0Rlc2t0b3AvSC9zcmMvYXBwL2FwaS90d2VldHMvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3R3ZWV0cy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3R3ZWV0c1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvdHdlZXRzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2V0aGFuL0Rlc2t0b3AvSC9zcmMvYXBwL2FwaS90d2VldHMvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3R3ZWV0cy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftweets%2Froute&page=%2Fapi%2Ftweets%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftweets%2Froute.ts&appDir=%2FUsers%2Fethan%2FDesktop%2FH%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fethan%2FDesktop%2FH&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/tweets/route.ts":
/*!*************************************!*\
  !*** ./src/app/api/tweets/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n\n\n// Helper function to create initial seed data\nasync function seedInitialData() {\n    const userCount = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.user.count();\n    if (userCount > 0) return; // Already seeded\n    // Create seed users\n    const user1 = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.user.create({\n        data: {\n            id: \"user1\",\n            worldcoinId: \"world_user_1\",\n            username: \"alice_world\",\n            displayName: \"Alice\",\n            avatar: \"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=150&h=150&fit=crop&crop=face\",\n            profilePictureUrl: \"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=150&h=150&fit=crop&crop=face\",\n            isVerified: true,\n            bio: \"Welcome to the future of social media! \\uD83C\\uDF0D\"\n        }\n    });\n    const user2 = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.user.create({\n        data: {\n            id: \"user2\",\n            worldcoinId: \"world_user_2\",\n            username: \"bob_crypto\",\n            displayName: \"Bob\",\n            avatar: \"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face\",\n            profilePictureUrl: \"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face\",\n            isVerified: true,\n            bio: \"Crypto enthusiast and privacy advocate\"\n        }\n    });\n    const user3 = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.user.create({\n        data: {\n            id: \"user3\",\n            worldcoinId: \"world_user_3\",\n            username: \"dev_charlie\",\n            displayName: \"Charlie Dev\",\n            avatar: \"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face\",\n            profilePictureUrl: \"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face\",\n            isVerified: true,\n            bio: \"Building the next generation of social apps\"\n        }\n    });\n    // Create seed tweets\n    await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.tweet.create({\n        data: {\n            content: \"Welcome to World App! \\uD83C\\uDF0D This is the future of decentralized social media.\",\n            authorId: user1.id,\n            createdAt: new Date(Date.now() - 3600000)\n        }\n    });\n    await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.tweet.create({\n        data: {\n            content: \"Just verified my identity with World ID! The authentication process is seamless and secure. #WorldID #Privacy\",\n            authorId: user2.id,\n            createdAt: new Date(Date.now() - 7200000)\n        }\n    });\n    const tweet3 = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.tweet.create({\n        data: {\n            content: \"Building the next generation of social apps with minikit-js. The possibilities are endless! \\uD83D\\uDE80\",\n            authorId: user3.id,\n            createdAt: new Date(Date.now() - 10800000)\n        }\n    });\n    // Add some media to the third tweet\n    await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.media.create({\n        data: {\n            tweetId: tweet3.id,\n            type: \"image\",\n            url: \"https://images.unsplash.com/photo-1551434678-e076c223a692?w=800&h=600&fit=crop\",\n            thumbnailUrl: \"https://images.unsplash.com/photo-1551434678-e076c223a692?w=400&h=300&fit=crop\"\n        }\n    });\n}\nasync function GET(request) {\n    try {\n        // Ensure seed data exists\n        await seedInitialData();\n        const { searchParams } = new URL(request.url);\n        const limit = parseInt(searchParams.get(\"limit\") || \"20\");\n        const offset = parseInt(searchParams.get(\"offset\") || \"0\");\n        const userId = searchParams.get(\"userId\"); // Optional: to get user-specific interaction status\n        // Fetch tweets with user data and counts\n        const tweets = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.tweet.findMany({\n            include: {\n                author: true,\n                media: true,\n                _count: {\n                    select: {\n                        likes: true,\n                        retweets: true\n                    }\n                }\n            },\n            orderBy: {\n                createdAt: \"desc\"\n            },\n            skip: offset,\n            take: limit\n        });\n        const totalCount = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.tweet.count();\n        // Get user interactions if userId provided\n        let userInteractions = {};\n        if (userId) {\n            const tweetIds = tweets.map((tweet)=>tweet.id);\n            const [likes, retweets] = await Promise.all([\n                _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.like.findMany({\n                    where: {\n                        userId,\n                        tweetId: {\n                            in: tweetIds\n                        }\n                    },\n                    select: {\n                        tweetId: true\n                    }\n                }),\n                _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.retweet.findMany({\n                    where: {\n                        userId,\n                        tweetId: {\n                            in: tweetIds\n                        }\n                    },\n                    select: {\n                        tweetId: true\n                    }\n                })\n            ]);\n            const likedTweetIds = new Set(likes.map((like)=>like.tweetId));\n            const retweetedTweetIds = new Set(retweets.map((retweet)=>retweet.tweetId));\n            userInteractions = tweetIds.reduce((acc, tweetId)=>{\n                acc[tweetId] = {\n                    isLiked: likedTweetIds.has(tweetId),\n                    isRetweeted: retweetedTweetIds.has(tweetId)\n                };\n                return acc;\n            }, {});\n        }\n        // Get comment counts for all tweets\n        const tweetIds = tweets.map((tweet)=>tweet.id);\n        const commentCounts = await Promise.all(tweetIds.map(async (tweetId)=>{\n            const count = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.comment.count({\n                where: {\n                    tweetId\n                }\n            });\n            return {\n                tweetId,\n                count\n            };\n        }));\n        const commentCountMap = commentCounts.reduce((acc, { tweetId, count })=>{\n            acc[tweetId] = count;\n            return acc;\n        }, {});\n        // Transform to match frontend format\n        const transformedTweets = tweets.map((tweet)=>({\n                id: tweet.id,\n                content: tweet.content,\n                author: {\n                    id: tweet.author.id,\n                    worldcoinId: tweet.author.worldcoinId || undefined,\n                    walletAddress: tweet.author.walletAddress || undefined,\n                    username: tweet.author.username,\n                    displayName: tweet.author.displayName,\n                    bio: tweet.author.bio || undefined,\n                    avatar: tweet.author.avatar || undefined,\n                    profilePictureUrl: tweet.author.profilePictureUrl || undefined,\n                    isVerified: tweet.author.isVerified,\n                    createdAt: tweet.author.createdAt\n                },\n                createdAt: tweet.createdAt.toISOString(),\n                likes: tweet._count.likes,\n                retweets: tweet._count.retweets,\n                replies: commentCountMap[tweet.id] || 0,\n                media: tweet.media.map((m)=>({\n                        id: m.id,\n                        type: m.type,\n                        url: m.url,\n                        thumbnailUrl: m.thumbnailUrl || undefined,\n                        alt: m.alt || undefined\n                    })),\n                isLiked: userInteractions[tweet.id]?.isLiked || false,\n                isRetweeted: userInteractions[tweet.id]?.isRetweeted || false\n            }));\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            tweets: transformedTweets,\n            hasMore: offset + limit < totalCount,\n            total: totalCount\n        });\n    } catch (error) {\n        console.error(\"Error fetching tweets:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to fetch tweets\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const { content, media, userId } = body;\n        // Validate required fields\n        if (!content || !userId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Content and userId are required\"\n            }, {\n                status: 400\n            });\n        }\n        if (content.length > 280) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Tweet content cannot exceed 280 characters\"\n            }, {\n                status: 400\n            });\n        }\n        // Find or create user\n        let user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.user.findFirst({\n            where: {\n                OR: [\n                    {\n                        id: userId\n                    },\n                    {\n                        nullifierHash: userId\n                    },\n                    {\n                        walletAddress: userId\n                    }\n                ]\n            }\n        });\n        // Update user streak\n        if (user) {\n            try {\n                const { updateUserStreak } = await __webpack_require__.e(/*! import() */ \"_rsc_src_lib_streak-manager_ts\").then(__webpack_require__.bind(__webpack_require__, /*! @/lib/streak-manager */ \"(rsc)/./src/lib/streak-manager.ts\"));\n                await updateUserStreak(user.id);\n            } catch (streakError) {\n                console.error(\"Error updating streak:\", streakError);\n            // Don't fail the tweet creation if streak update fails\n            }\n        }\n        if (!user) {\n            // Create new user\n            const isWorldIdUser = userId.startsWith(\"0x\") && userId.length > 20;\n            const isWalletUser = userId.startsWith(\"0x\") && userId.length <= 20;\n            user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.user.create({\n                data: {\n                    id: userId,\n                    nullifierHash: isWorldIdUser ? userId : undefined,\n                    walletAddress: isWalletUser ? userId : undefined,\n                    worldcoinId: isWorldIdUser ? `world_${userId}` : undefined,\n                    username: isWorldIdUser ? `human_${userId.slice(-8)}` : isWalletUser ? `user_${userId.slice(-8)}` : userId.startsWith(\"user\") ? userId : `user_${userId}`,\n                    displayName: isWorldIdUser ? \"Verified Human\" : isWalletUser ? \"World User\" : userId.startsWith(\"user\") ? userId.charAt(0).toUpperCase() + userId.slice(1) : \"User\",\n                    bio: isWorldIdUser ? \"Verified human on World ID\" : isWalletUser ? \"World App user\" : \"User profile\",\n                    avatar: `https://api.dicebear.com/7.x/personas/svg?seed=${userId}`,\n                    profilePictureUrl: `https://api.dicebear.com/7.x/personas/svg?seed=${userId}`,\n                    isVerified: isWorldIdUser || [\n                        \"user1\",\n                        \"user2\",\n                        \"user3\"\n                    ].includes(userId),\n                    verificationLevel: isWorldIdUser ? \"orb\" : undefined\n                }\n            });\n        }\n        // Create tweet with media\n        const tweet = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.tweet.create({\n            data: {\n                content,\n                authorId: user.id,\n                media: media && media.length > 0 ? {\n                    create: media.map((item)=>({\n                            type: item.type,\n                            url: item.url,\n                            thumbnailUrl: item.thumbnailUrl,\n                            alt: item.alt\n                        }))\n                } : undefined\n            },\n            include: {\n                author: true,\n                media: true,\n                _count: {\n                    select: {\n                        likes: true,\n                        retweets: true\n                    }\n                }\n            }\n        });\n        // Transform to match frontend format\n        const transformedTweet = {\n            id: tweet.id,\n            content: tweet.content,\n            author: {\n                id: tweet.author.id,\n                worldcoinId: tweet.author.worldcoinId || undefined,\n                walletAddress: tweet.author.walletAddress || undefined,\n                username: tweet.author.username,\n                displayName: tweet.author.displayName,\n                bio: tweet.author.bio || undefined,\n                avatar: tweet.author.avatar || undefined,\n                profilePictureUrl: tweet.author.profilePictureUrl || undefined,\n                isVerified: tweet.author.isVerified,\n                createdAt: tweet.author.createdAt\n            },\n            createdAt: tweet.createdAt.toISOString(),\n            likes: tweet._count.likes,\n            retweets: tweet._count.retweets,\n            replies: 0,\n            media: tweet.media.map((m)=>({\n                    id: m.id,\n                    type: m.type,\n                    url: m.url,\n                    thumbnailUrl: m.thumbnailUrl || undefined,\n                    alt: m.alt || undefined\n                })),\n            isLiked: false,\n            isRetweeted: false\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(transformedTweet, {\n            status: 201\n        });\n    } catch (error) {\n        console.error(\"Error creating tweet:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to create tweet\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUVqRCxJQUFJO29CQUNaQyxLQUFLZ0QsRUFBRWhELEdBQUc7b0JBQ1ZDLGNBQWMrQyxFQUFFL0MsWUFBWSxJQUFJMkM7b0JBQ2hDSyxLQUFLRCxFQUFFQyxHQUFHLElBQUlMO2dCQUNoQjtZQUNBUCxTQUFTO1lBQ1RFLGFBQWE7UUFDZjtRQUVBLE9BQU9wRSxxREFBWUEsQ0FBQytFLElBQUksQ0FBQ3VCLGtCQUFrQjtZQUFFbEIsUUFBUTtRQUFJO0lBQzNELEVBQUUsT0FBT0YsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMseUJBQXlCQTtRQUN2QyxPQUFPbEYscURBQVlBLENBQUMrRSxJQUFJLENBQ3RCO1lBQUVHLE9BQU87UUFBeUIsR0FDbEM7WUFBRUUsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly94LXdvcmxkLW1pbmktYXBwLy4vc3JjL2FwcC9hcGkvdHdlZXRzL3JvdXRlLnRzP2VmNmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IFR3ZWV0IH0gZnJvbSAnQC90eXBlcyc7XG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICdAL2xpYi9wcmlzbWEnO1xuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gY3JlYXRlIGluaXRpYWwgc2VlZCBkYXRhXG5hc3luYyBmdW5jdGlvbiBzZWVkSW5pdGlhbERhdGEoKSB7XG4gIGNvbnN0IHVzZXJDb3VudCA9IGF3YWl0IHByaXNtYS51c2VyLmNvdW50KCk7XG4gIGlmICh1c2VyQ291bnQgPiAwKSByZXR1cm47IC8vIEFscmVhZHkgc2VlZGVkXG5cbiAgLy8gQ3JlYXRlIHNlZWQgdXNlcnNcbiAgY29uc3QgdXNlcjEgPSBhd2FpdCBwcmlzbWEudXNlci5jcmVhdGUoe1xuICAgIGRhdGE6IHtcbiAgICAgIGlkOiAndXNlcjEnLFxuICAgICAgd29ybGRjb2luSWQ6ICd3b3JsZF91c2VyXzEnLFxuICAgICAgdXNlcm5hbWU6ICdhbGljZV93b3JsZCcsXG4gICAgICBkaXNwbGF5TmFtZTogJ0FsaWNlJyxcbiAgICAgIGF2YXRhcjogJ2h0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNDk0NzkwMTA4NzU1LTI2MTZiNjEyYjc4Nj93PTE1MCZoPTE1MCZmaXQ9Y3JvcCZjcm9wPWZhY2UnLFxuICAgICAgcHJvZmlsZVBpY3R1cmVVcmw6ICdodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTQ5NDc5MDEwODc1NS0yNjE2YjYxMmI3ODY/dz0xNTAmaD0xNTAmZml0PWNyb3AmY3JvcD1mYWNlJyxcbiAgICAgIGlzVmVyaWZpZWQ6IHRydWUsXG4gICAgICBiaW86ICdXZWxjb21lIHRvIHRoZSBmdXR1cmUgb2Ygc29jaWFsIG1lZGlhISDwn4yNJyxcbiAgICB9LFxuICB9KTtcblxuICBjb25zdCB1c2VyMiA9IGF3YWl0IHByaXNtYS51c2VyLmNyZWF0ZSh7XG4gICAgZGF0YToge1xuICAgICAgaWQ6ICd1c2VyMicsXG4gICAgICB3b3JsZGNvaW5JZDogJ3dvcmxkX3VzZXJfMicsXG4gICAgICB1c2VybmFtZTogJ2JvYl9jcnlwdG8nLFxuICAgICAgZGlzcGxheU5hbWU6ICdCb2InLFxuICAgICAgYXZhdGFyOiAnaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1MDcwMDMyMTExNjktMGExZGQ3MjI4ZjJkP3c9MTUwJmg9MTUwJmZpdD1jcm9wJmNyb3A9ZmFjZScsXG4gICAgICBwcm9maWxlUGljdHVyZVVybDogJ2h0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTA3MDAzMjExMTY5LTBhMWRkNzIyOGYyZD93PTE1MCZoPTE1MCZmaXQ9Y3JvcCZjcm9wPWZhY2UnLFxuICAgICAgaXNWZXJpZmllZDogdHJ1ZSxcbiAgICAgIGJpbzogJ0NyeXB0byBlbnRodXNpYXN0IGFuZCBwcml2YWN5IGFkdm9jYXRlJyxcbiAgICB9LFxuICB9KTtcblxuICBjb25zdCB1c2VyMyA9IGF3YWl0IHByaXNtYS51c2VyLmNyZWF0ZSh7XG4gICAgZGF0YToge1xuICAgICAgaWQ6ICd1c2VyMycsXG4gICAgICB3b3JsZGNvaW5JZDogJ3dvcmxkX3VzZXJfMycsXG4gICAgICB1c2VybmFtZTogJ2Rldl9jaGFybGllJyxcbiAgICAgIGRpc3BsYXlOYW1lOiAnQ2hhcmxpZSBEZXYnLFxuICAgICAgYXZhdGFyOiAnaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE0NzIwOTk2NDU3ODUtNTY1OGFiZjRmZjRlP3c9MTUwJmg9MTUwJmZpdD1jcm9wJmNyb3A9ZmFjZScsXG4gICAgICBwcm9maWxlUGljdHVyZVVybDogJ2h0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNDcyMDk5NjQ1Nzg1LTU2NThhYmY0ZmY0ZT93PTE1MCZoPTE1MCZmaXQ9Y3JvcCZjcm9wPWZhY2UnLFxuICAgICAgaXNWZXJpZmllZDogdHJ1ZSxcbiAgICAgIGJpbzogJ0J1aWxkaW5nIHRoZSBuZXh0IGdlbmVyYXRpb24gb2Ygc29jaWFsIGFwcHMnLFxuICAgIH0sXG4gIH0pO1xuXG4gIC8vIENyZWF0ZSBzZWVkIHR3ZWV0c1xuICBhd2FpdCBwcmlzbWEudHdlZXQuY3JlYXRlKHtcbiAgICBkYXRhOiB7XG4gICAgICBjb250ZW50OiAnV2VsY29tZSB0byBXb3JsZCBBcHAhIPCfjI0gVGhpcyBpcyB0aGUgZnV0dXJlIG9mIGRlY2VudHJhbGl6ZWQgc29jaWFsIG1lZGlhLicsXG4gICAgICBhdXRob3JJZDogdXNlcjEuaWQsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKERhdGUubm93KCkgLSAzNjAwMDAwKSwgLy8gMSBob3VyIGFnb1xuICAgIH0sXG4gIH0pO1xuXG4gIGF3YWl0IHByaXNtYS50d2VldC5jcmVhdGUoe1xuICAgIGRhdGE6IHtcbiAgICAgIGNvbnRlbnQ6ICdKdXN0IHZlcmlmaWVkIG15IGlkZW50aXR5IHdpdGggV29ybGQgSUQhIFRoZSBhdXRoZW50aWNhdGlvbiBwcm9jZXNzIGlzIHNlYW1sZXNzIGFuZCBzZWN1cmUuICNXb3JsZElEICNQcml2YWN5JyxcbiAgICAgIGF1dGhvcklkOiB1c2VyMi5pZCxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoRGF0ZS5ub3coKSAtIDcyMDAwMDApLCAvLyAyIGhvdXJzIGFnb1xuICAgIH0sXG4gIH0pO1xuXG4gIGNvbnN0IHR3ZWV0MyA9IGF3YWl0IHByaXNtYS50d2VldC5jcmVhdGUoe1xuICAgIGRhdGE6IHtcbiAgICAgIGNvbnRlbnQ6ICdCdWlsZGluZyB0aGUgbmV4dCBnZW5lcmF0aW9uIG9mIHNvY2lhbCBhcHBzIHdpdGggbWluaWtpdC1qcy4gVGhlIHBvc3NpYmlsaXRpZXMgYXJlIGVuZGxlc3MhIPCfmoAnLFxuICAgICAgYXV0aG9ySWQ6IHVzZXIzLmlkLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZShEYXRlLm5vdygpIC0gMTA4MDAwMDApLCAvLyAzIGhvdXJzIGFnb1xuICAgIH0sXG4gIH0pO1xuXG4gIC8vIEFkZCBzb21lIG1lZGlhIHRvIHRoZSB0aGlyZCB0d2VldFxuICBhd2FpdCBwcmlzbWEubWVkaWEuY3JlYXRlKHtcbiAgICBkYXRhOiB7XG4gICAgICB0d2VldElkOiB0d2VldDMuaWQsXG4gICAgICB0eXBlOiAnaW1hZ2UnLFxuICAgICAgdXJsOiAnaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1NTE0MzQ2NzgtZTA3NmMyMjNhNjkyP3c9ODAwJmg9NjAwJmZpdD1jcm9wJyxcbiAgICAgIHRodW1ibmFpbFVybDogJ2h0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTUxNDM0Njc4LWUwNzZjMjIzYTY5Mj93PTQwMCZoPTMwMCZmaXQ9Y3JvcCcsXG4gICAgfSxcbiAgfSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICAvLyBFbnN1cmUgc2VlZCBkYXRhIGV4aXN0c1xuICAgIGF3YWl0IHNlZWRJbml0aWFsRGF0YSgpO1xuXG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xuICAgIGNvbnN0IGxpbWl0ID0gcGFyc2VJbnQoc2VhcmNoUGFyYW1zLmdldCgnbGltaXQnKSB8fCAnMjAnKTtcbiAgICBjb25zdCBvZmZzZXQgPSBwYXJzZUludChzZWFyY2hQYXJhbXMuZ2V0KCdvZmZzZXQnKSB8fCAnMCcpO1xuICAgIGNvbnN0IHVzZXJJZCA9IHNlYXJjaFBhcmFtcy5nZXQoJ3VzZXJJZCcpOyAvLyBPcHRpb25hbDogdG8gZ2V0IHVzZXItc3BlY2lmaWMgaW50ZXJhY3Rpb24gc3RhdHVzXG5cbiAgICAvLyBGZXRjaCB0d2VldHMgd2l0aCB1c2VyIGRhdGEgYW5kIGNvdW50c1xuICAgIGNvbnN0IHR3ZWV0cyA9IGF3YWl0IHByaXNtYS50d2VldC5maW5kTWFueSh7XG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIGF1dGhvcjogdHJ1ZSxcbiAgICAgICAgbWVkaWE6IHRydWUsXG4gICAgICAgIF9jb3VudDoge1xuICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgbGlrZXM6IHRydWUsXG4gICAgICAgICAgICByZXR3ZWV0czogdHJ1ZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIG9yZGVyQnk6IHtcbiAgICAgICAgY3JlYXRlZEF0OiAnZGVzYycsXG4gICAgICB9LFxuICAgICAgc2tpcDogb2Zmc2V0LFxuICAgICAgdGFrZTogbGltaXQsXG4gICAgfSk7XG5cbiAgICBjb25zdCB0b3RhbENvdW50ID0gYXdhaXQgcHJpc21hLnR3ZWV0LmNvdW50KCk7XG5cbiAgICAvLyBHZXQgdXNlciBpbnRlcmFjdGlvbnMgaWYgdXNlcklkIHByb3ZpZGVkXG4gICAgbGV0IHVzZXJJbnRlcmFjdGlvbnM6IFJlY29yZDxzdHJpbmcsIHsgaXNMaWtlZDogYm9vbGVhbjsgaXNSZXR3ZWV0ZWQ6IGJvb2xlYW4gfT4gPSB7fTtcbiAgICBpZiAodXNlcklkKSB7XG4gICAgICBjb25zdCB0d2VldElkcyA9IHR3ZWV0cy5tYXAoKHR3ZWV0OiBhbnkpID0+IHR3ZWV0LmlkKTtcbiAgICAgIGNvbnN0IFtsaWtlcywgcmV0d2VldHNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICBwcmlzbWEubGlrZS5maW5kTWFueSh7XG4gICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICAgIHR3ZWV0SWQ6IHsgaW46IHR3ZWV0SWRzIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZWxlY3Q6IHsgdHdlZXRJZDogdHJ1ZSB9LFxuICAgICAgICB9KSxcbiAgICAgICAgcHJpc21hLnJldHdlZXQuZmluZE1hbnkoe1xuICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgICB0d2VldElkOiB7IGluOiB0d2VldElkcyB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2VsZWN0OiB7IHR3ZWV0SWQ6IHRydWUgfSxcbiAgICAgICAgfSksXG4gICAgICBdKTtcblxuICAgICAgY29uc3QgbGlrZWRUd2VldElkcyA9IG5ldyBTZXQobGlrZXMubWFwKChsaWtlOiBhbnkpID0+IGxpa2UudHdlZXRJZCkpO1xuICAgICAgY29uc3QgcmV0d2VldGVkVHdlZXRJZHMgPSBuZXcgU2V0KHJldHdlZXRzLm1hcCgocmV0d2VldDogYW55KSA9PiByZXR3ZWV0LnR3ZWV0SWQpKTtcblxuICAgICAgdXNlckludGVyYWN0aW9ucyA9IHR3ZWV0SWRzLnJlZHVjZSgoYWNjOiBhbnksIHR3ZWV0SWQ6IHN0cmluZykgPT4ge1xuICAgICAgICBhY2NbdHdlZXRJZF0gPSB7XG4gICAgICAgICAgaXNMaWtlZDogbGlrZWRUd2VldElkcy5oYXModHdlZXRJZCksXG4gICAgICAgICAgaXNSZXR3ZWV0ZWQ6IHJldHdlZXRlZFR3ZWV0SWRzLmhhcyh0d2VldElkKSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgIH0sIHt9IGFzIFJlY29yZDxzdHJpbmcsIHsgaXNMaWtlZDogYm9vbGVhbjsgaXNSZXR3ZWV0ZWQ6IGJvb2xlYW4gfT4pO1xuICAgIH1cblxuICAgIC8vIEdldCBjb21tZW50IGNvdW50cyBmb3IgYWxsIHR3ZWV0c1xuICAgIGNvbnN0IHR3ZWV0SWRzID0gdHdlZXRzLm1hcCgodHdlZXQ6IGFueSkgPT4gdHdlZXQuaWQpO1xuICAgIGNvbnN0IGNvbW1lbnRDb3VudHMgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgIHR3ZWV0SWRzLm1hcChhc3luYyAodHdlZXRJZDogc3RyaW5nKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvdW50ID0gYXdhaXQgcHJpc21hLmNvbW1lbnQuY291bnQoe1xuICAgICAgICAgIHdoZXJlOiB7IHR3ZWV0SWQgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHsgdHdlZXRJZCwgY291bnQgfTtcbiAgICAgIH0pXG4gICAgKTtcbiAgICBjb25zdCBjb21tZW50Q291bnRNYXAgPSBjb21tZW50Q291bnRzLnJlZHVjZSgoYWNjOiBhbnksIHsgdHdlZXRJZCwgY291bnQgfSkgPT4ge1xuICAgICAgYWNjW3R3ZWV0SWRdID0gY291bnQ7XG4gICAgICByZXR1cm4gYWNjO1xuICAgIH0sIHt9KTtcblxuICAgIC8vIFRyYW5zZm9ybSB0byBtYXRjaCBmcm9udGVuZCBmb3JtYXRcbiAgICBjb25zdCB0cmFuc2Zvcm1lZFR3ZWV0czogVHdlZXRbXSA9IHR3ZWV0cy5tYXAoKHR3ZWV0OiBhbnkpID0+ICh7XG4gICAgICBpZDogdHdlZXQuaWQsXG4gICAgICBjb250ZW50OiB0d2VldC5jb250ZW50LFxuICAgICAgYXV0aG9yOiB7XG4gICAgICAgIGlkOiB0d2VldC5hdXRob3IuaWQsXG4gICAgICAgIHdvcmxkY29pbklkOiB0d2VldC5hdXRob3Iud29ybGRjb2luSWQgfHwgdW5kZWZpbmVkLFxuICAgICAgICB3YWxsZXRBZGRyZXNzOiB0d2VldC5hdXRob3Iud2FsbGV0QWRkcmVzcyB8fCB1bmRlZmluZWQsXG4gICAgICAgIHVzZXJuYW1lOiB0d2VldC5hdXRob3IudXNlcm5hbWUsXG4gICAgICAgIGRpc3BsYXlOYW1lOiB0d2VldC5hdXRob3IuZGlzcGxheU5hbWUsXG4gICAgICAgIGJpbzogdHdlZXQuYXV0aG9yLmJpbyB8fCB1bmRlZmluZWQsXG4gICAgICAgIGF2YXRhcjogdHdlZXQuYXV0aG9yLmF2YXRhciB8fCB1bmRlZmluZWQsXG4gICAgICAgIHByb2ZpbGVQaWN0dXJlVXJsOiB0d2VldC5hdXRob3IucHJvZmlsZVBpY3R1cmVVcmwgfHwgdW5kZWZpbmVkLFxuICAgICAgICBpc1ZlcmlmaWVkOiB0d2VldC5hdXRob3IuaXNWZXJpZmllZCxcbiAgICAgICAgY3JlYXRlZEF0OiB0d2VldC5hdXRob3IuY3JlYXRlZEF0LFxuICAgICAgfSxcbiAgICAgIGNyZWF0ZWRBdDogdHdlZXQuY3JlYXRlZEF0LnRvSVNPU3RyaW5nKCksXG4gICAgICBsaWtlczogdHdlZXQuX2NvdW50Lmxpa2VzLFxuICAgICAgcmV0d2VldHM6IHR3ZWV0Ll9jb3VudC5yZXR3ZWV0cyxcbiAgICAgIHJlcGxpZXM6IGNvbW1lbnRDb3VudE1hcFt0d2VldC5pZF0gfHwgMCxcbiAgICAgIG1lZGlhOiB0d2VldC5tZWRpYS5tYXAoKG06IGFueSkgPT4gKHtcbiAgICAgICAgaWQ6IG0uaWQsXG4gICAgICAgIHR5cGU6IG0udHlwZSBhcyAnaW1hZ2UnIHwgJ3ZpZGVvJyxcbiAgICAgICAgdXJsOiBtLnVybCxcbiAgICAgICAgdGh1bWJuYWlsVXJsOiBtLnRodW1ibmFpbFVybCB8fCB1bmRlZmluZWQsXG4gICAgICAgIGFsdDogbS5hbHQgfHwgdW5kZWZpbmVkLFxuICAgICAgfSkpLFxuICAgICAgaXNMaWtlZDogdXNlckludGVyYWN0aW9uc1t0d2VldC5pZF0/LmlzTGlrZWQgfHwgZmFsc2UsXG4gICAgICBpc1JldHdlZXRlZDogdXNlckludGVyYWN0aW9uc1t0d2VldC5pZF0/LmlzUmV0d2VldGVkIHx8IGZhbHNlLFxuICAgIH0pKTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICB0d2VldHM6IHRyYW5zZm9ybWVkVHdlZXRzLFxuICAgICAgaGFzTW9yZTogb2Zmc2V0ICsgbGltaXQgPCB0b3RhbENvdW50LFxuICAgICAgdG90YWw6IHRvdGFsQ291bnQsXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdHdlZXRzOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIHR3ZWV0cycgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgY29uc3QgeyBjb250ZW50LCBtZWRpYSwgdXNlcklkIH0gPSBib2R5O1xuXG4gICAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgZmllbGRzXG4gICAgaWYgKCFjb250ZW50IHx8ICF1c2VySWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ0NvbnRlbnQgYW5kIHVzZXJJZCBhcmUgcmVxdWlyZWQnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoY29udGVudC5sZW5ndGggPiAyODApIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ1R3ZWV0IGNvbnRlbnQgY2Fubm90IGV4Y2VlZCAyODAgY2hhcmFjdGVycycgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIEZpbmQgb3IgY3JlYXRlIHVzZXJcbiAgICBsZXQgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRGaXJzdCh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBPUjogW1xuICAgICAgICAgIHsgaWQ6IHVzZXJJZCB9LFxuICAgICAgICAgIHsgbnVsbGlmaWVySGFzaDogdXNlcklkIH0sXG4gICAgICAgICAgeyB3YWxsZXRBZGRyZXNzOiB1c2VySWQgfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBVcGRhdGUgdXNlciBzdHJlYWtcbiAgICBpZiAodXNlcikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyB1cGRhdGVVc2VyU3RyZWFrIH0gPSBhd2FpdCBpbXBvcnQoJ0AvbGliL3N0cmVhay1tYW5hZ2VyJyk7XG4gICAgICAgIGF3YWl0IHVwZGF0ZVVzZXJTdHJlYWsodXNlci5pZCk7XG4gICAgICB9IGNhdGNoIChzdHJlYWtFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBzdHJlYWs6Jywgc3RyZWFrRXJyb3IpO1xuICAgICAgICAvLyBEb24ndCBmYWlsIHRoZSB0d2VldCBjcmVhdGlvbiBpZiBzdHJlYWsgdXBkYXRlIGZhaWxzXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICAvLyBDcmVhdGUgbmV3IHVzZXJcbiAgICAgIGNvbnN0IGlzV29ybGRJZFVzZXIgPSB1c2VySWQuc3RhcnRzV2l0aCgnMHgnKSAmJiB1c2VySWQubGVuZ3RoID4gMjA7XG4gICAgICBjb25zdCBpc1dhbGxldFVzZXIgPSB1c2VySWQuc3RhcnRzV2l0aCgnMHgnKSAmJiB1c2VySWQubGVuZ3RoIDw9IDIwO1xuICAgICAgXG4gICAgICB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGlkOiB1c2VySWQsXG4gICAgICAgICAgbnVsbGlmaWVySGFzaDogaXNXb3JsZElkVXNlciA/IHVzZXJJZCA6IHVuZGVmaW5lZCxcbiAgICAgICAgICB3YWxsZXRBZGRyZXNzOiBpc1dhbGxldFVzZXIgPyB1c2VySWQgOiB1bmRlZmluZWQsXG4gICAgICAgICAgd29ybGRjb2luSWQ6IGlzV29ybGRJZFVzZXIgPyBgd29ybGRfJHt1c2VySWR9YCA6IHVuZGVmaW5lZCxcbiAgICAgICAgICB1c2VybmFtZTogaXNXb3JsZElkVXNlciBcbiAgICAgICAgICAgID8gYGh1bWFuXyR7dXNlcklkLnNsaWNlKC04KX1gIFxuICAgICAgICAgICAgOiBpc1dhbGxldFVzZXIgXG4gICAgICAgICAgICAgID8gYHVzZXJfJHt1c2VySWQuc2xpY2UoLTgpfWBcbiAgICAgICAgICAgICAgOiB1c2VySWQuc3RhcnRzV2l0aCgndXNlcicpID8gdXNlcklkIDogYHVzZXJfJHt1c2VySWR9YCxcbiAgICAgICAgICBkaXNwbGF5TmFtZTogaXNXb3JsZElkVXNlciBcbiAgICAgICAgICAgID8gJ1ZlcmlmaWVkIEh1bWFuJyBcbiAgICAgICAgICAgIDogaXNXYWxsZXRVc2VyIFxuICAgICAgICAgICAgICA/ICdXb3JsZCBVc2VyJ1xuICAgICAgICAgICAgICA6IHVzZXJJZC5zdGFydHNXaXRoKCd1c2VyJykgPyB1c2VySWQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB1c2VySWQuc2xpY2UoMSkgOiAnVXNlcicsXG4gICAgICAgICAgYmlvOiBpc1dvcmxkSWRVc2VyIFxuICAgICAgICAgICAgPyAnVmVyaWZpZWQgaHVtYW4gb24gV29ybGQgSUQnIFxuICAgICAgICAgICAgOiBpc1dhbGxldFVzZXIgXG4gICAgICAgICAgICAgID8gJ1dvcmxkIEFwcCB1c2VyJ1xuICAgICAgICAgICAgICA6ICdVc2VyIHByb2ZpbGUnLFxuICAgICAgICAgIGF2YXRhcjogYGh0dHBzOi8vYXBpLmRpY2ViZWFyLmNvbS83LngvcGVyc29uYXMvc3ZnP3NlZWQ9JHt1c2VySWR9YCxcbiAgICAgICAgICBwcm9maWxlUGljdHVyZVVybDogYGh0dHBzOi8vYXBpLmRpY2ViZWFyLmNvbS83LngvcGVyc29uYXMvc3ZnP3NlZWQ9JHt1c2VySWR9YCxcbiAgICAgICAgICBpc1ZlcmlmaWVkOiBpc1dvcmxkSWRVc2VyIHx8IFsndXNlcjEnLCAndXNlcjInLCAndXNlcjMnXS5pbmNsdWRlcyh1c2VySWQpLFxuICAgICAgICAgIHZlcmlmaWNhdGlvbkxldmVsOiBpc1dvcmxkSWRVc2VyID8gJ29yYicgOiB1bmRlZmluZWQsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgdHdlZXQgd2l0aCBtZWRpYVxuICAgIGNvbnN0IHR3ZWV0ID0gYXdhaXQgcHJpc21hLnR3ZWV0LmNyZWF0ZSh7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIGNvbnRlbnQsXG4gICAgICAgIGF1dGhvcklkOiB1c2VyLmlkLFxuICAgICAgICBtZWRpYTogbWVkaWEgJiYgbWVkaWEubGVuZ3RoID4gMCA/IHtcbiAgICAgICAgICBjcmVhdGU6IG1lZGlhLm1hcCgoaXRlbTogYW55KSA9PiAoe1xuICAgICAgICAgICAgdHlwZTogaXRlbS50eXBlLFxuICAgICAgICAgICAgdXJsOiBpdGVtLnVybCxcbiAgICAgICAgICAgIHRodW1ibmFpbFVybDogaXRlbS50aHVtYm5haWxVcmwsXG4gICAgICAgICAgICBhbHQ6IGl0ZW0uYWx0LFxuICAgICAgICAgIH0pKVxuICAgICAgICB9IDogdW5kZWZpbmVkLFxuICAgICAgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgYXV0aG9yOiB0cnVlLFxuICAgICAgICBtZWRpYTogdHJ1ZSxcbiAgICAgICAgX2NvdW50OiB7XG4gICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICBsaWtlczogdHJ1ZSxcbiAgICAgICAgICAgIHJldHdlZXRzOiB0cnVlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8gVHJhbnNmb3JtIHRvIG1hdGNoIGZyb250ZW5kIGZvcm1hdFxuICAgIGNvbnN0IHRyYW5zZm9ybWVkVHdlZXQ6IFR3ZWV0ID0ge1xuICAgICAgaWQ6IHR3ZWV0LmlkLFxuICAgICAgY29udGVudDogdHdlZXQuY29udGVudCxcbiAgICAgIGF1dGhvcjoge1xuICAgICAgICBpZDogdHdlZXQuYXV0aG9yLmlkLFxuICAgICAgICB3b3JsZGNvaW5JZDogdHdlZXQuYXV0aG9yLndvcmxkY29pbklkIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgd2FsbGV0QWRkcmVzczogdHdlZXQuYXV0aG9yLndhbGxldEFkZHJlc3MgfHwgdW5kZWZpbmVkLFxuICAgICAgICB1c2VybmFtZTogdHdlZXQuYXV0aG9yLnVzZXJuYW1lLFxuICAgICAgICBkaXNwbGF5TmFtZTogdHdlZXQuYXV0aG9yLmRpc3BsYXlOYW1lLFxuICAgICAgICBiaW86IHR3ZWV0LmF1dGhvci5iaW8gfHwgdW5kZWZpbmVkLFxuICAgICAgICBhdmF0YXI6IHR3ZWV0LmF1dGhvci5hdmF0YXIgfHwgdW5kZWZpbmVkLFxuICAgICAgICBwcm9maWxlUGljdHVyZVVybDogdHdlZXQuYXV0aG9yLnByb2ZpbGVQaWN0dXJlVXJsIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgaXNWZXJpZmllZDogdHdlZXQuYXV0aG9yLmlzVmVyaWZpZWQsXG4gICAgICAgIGNyZWF0ZWRBdDogdHdlZXQuYXV0aG9yLmNyZWF0ZWRBdCxcbiAgICAgIH0sXG4gICAgICBjcmVhdGVkQXQ6IHR3ZWV0LmNyZWF0ZWRBdC50b0lTT1N0cmluZygpLFxuICAgICAgbGlrZXM6IHR3ZWV0Ll9jb3VudC5saWtlcyxcbiAgICAgIHJldHdlZXRzOiB0d2VldC5fY291bnQucmV0d2VldHMsXG4gICAgICByZXBsaWVzOiAwLCAvLyBDb21tZW50IGNvdW50IGZvciBuZXdseSBjcmVhdGVkIHR3ZWV0XG4gICAgICBtZWRpYTogdHdlZXQubWVkaWEubWFwKChtOiBhbnkpID0+ICh7XG4gICAgICAgIGlkOiBtLmlkLFxuICAgICAgICB0eXBlOiBtLnR5cGUgYXMgJ2ltYWdlJyB8ICd2aWRlbycsXG4gICAgICAgIHVybDogbS51cmwsXG4gICAgICAgIHRodW1ibmFpbFVybDogbS50aHVtYm5haWxVcmwgfHwgdW5kZWZpbmVkLFxuICAgICAgICBhbHQ6IG0uYWx0IHx8IHVuZGVmaW5lZCxcbiAgICAgIH0pKSxcbiAgICAgIGlzTGlrZWQ6IGZhbHNlLFxuICAgICAgaXNSZXR3ZWV0ZWQ6IGZhbHNlLFxuICAgIH07XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24odHJhbnNmb3JtZWRUd2VldCwgeyBzdGF0dXM6IDIwMSB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyB0d2VldDonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byBjcmVhdGUgdHdlZXQnIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicHJpc21hIiwic2VlZEluaXRpYWxEYXRhIiwidXNlckNvdW50IiwidXNlciIsImNvdW50IiwidXNlcjEiLCJjcmVhdGUiLCJkYXRhIiwiaWQiLCJ3b3JsZGNvaW5JZCIsInVzZXJuYW1lIiwiZGlzcGxheU5hbWUiLCJhdmF0YXIiLCJwcm9maWxlUGljdHVyZVVybCIsImlzVmVyaWZpZWQiLCJiaW8iLCJ1c2VyMiIsInVzZXIzIiwidHdlZXQiLCJjb250ZW50IiwiYXV0aG9ySWQiLCJjcmVhdGVkQXQiLCJEYXRlIiwibm93IiwidHdlZXQzIiwibWVkaWEiLCJ0d2VldElkIiwidHlwZSIsInVybCIsInRodW1ibmFpbFVybCIsIkdFVCIsInJlcXVlc3QiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJsaW1pdCIsInBhcnNlSW50IiwiZ2V0Iiwib2Zmc2V0IiwidXNlcklkIiwidHdlZXRzIiwiZmluZE1hbnkiLCJpbmNsdWRlIiwiYXV0aG9yIiwiX2NvdW50Iiwic2VsZWN0IiwibGlrZXMiLCJyZXR3ZWV0cyIsIm9yZGVyQnkiLCJza2lwIiwidGFrZSIsInRvdGFsQ291bnQiLCJ1c2VySW50ZXJhY3Rpb25zIiwidHdlZXRJZHMiLCJtYXAiLCJQcm9taXNlIiwiYWxsIiwibGlrZSIsIndoZXJlIiwiaW4iLCJyZXR3ZWV0IiwibGlrZWRUd2VldElkcyIsIlNldCIsInJldHdlZXRlZFR3ZWV0SWRzIiwicmVkdWNlIiwiYWNjIiwiaXNMaWtlZCIsImhhcyIsImlzUmV0d2VldGVkIiwiY29tbWVudENvdW50cyIsImNvbW1lbnQiLCJjb21tZW50Q291bnRNYXAiLCJ0cmFuc2Zvcm1lZFR3ZWV0cyIsInVuZGVmaW5lZCIsIndhbGxldEFkZHJlc3MiLCJ0b0lTT1N0cmluZyIsInJlcGxpZXMiLCJtIiwiYWx0IiwianNvbiIsImhhc01vcmUiLCJ0b3RhbCIsImVycm9yIiwiY29uc29sZSIsInN0YXR1cyIsIlBPU1QiLCJib2R5IiwibGVuZ3RoIiwiZmluZEZpcnN0IiwiT1IiLCJudWxsaWZpZXJIYXNoIiwidXBkYXRlVXNlclN0cmVhayIsInN0cmVha0Vycm9yIiwiaXNXb3JsZElkVXNlciIsInN0YXJ0c1dpdGgiLCJpc1dhbGxldFVzZXIiLCJzbGljZSIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwiaW5jbHVkZXMiLCJ2ZXJpZmljYXRpb25MZXZlbCIsIml0ZW0iLCJ0cmFuc2Zvcm1lZFR3ZWV0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/tweets/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNkM7QUFFN0MsTUFBTUMsa0JBQWtCQztBQUlqQixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSCx3REFBWUEsR0FBRTtBQUVsRSxJQUFJSSxJQUF5QixFQUFjSCxnQkFBZ0JFLE1BQU0sR0FBR0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly94LXdvcmxkLW1pbmktYXBwLy4vc3JjL2xpYi9wcmlzbWEudHM/MDFkNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCdcblxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsVGhpcyBhcyB1bmtub3duIGFzIHtcbiAgcHJpc21hOiBQcmlzbWFDbGllbnQgfCB1bmRlZmluZWRcbn1cblxuZXhwb3J0IGNvbnN0IHByaXNtYSA9IGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPz8gbmV3IFByaXNtYUNsaWVudCgpXG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID0gcHJpc21hXG4iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsVGhpcyIsInByaXNtYSIsInByb2Nlc3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftweets%2Froute&page=%2Fapi%2Ftweets%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftweets%2Froute.ts&appDir=%2FUsers%2Fethan%2FDesktop%2FH%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fethan%2FDesktop%2FH&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();